{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/service/GuestCartService.js"],"sourcesContent":["\"use client\"\n\nconst cartKey = 'shopflow';\n\nexport function loadCart() {\n  const storedCart = localStorage.getItem(cartKey);\n  return storedCart ? JSON.parse(storedCart) : [];\n}\n\nexport function saveCart(cart) {\n  localStorage.setItem(cartKey, JSON.stringify(cart));\n}\n\nexport function findProductIndex(cart, productId) {\n  return cart.findIndex(item => item.id === productId);\n}\n\nexport function addProduct(product) {\n  const cart = loadCart();\n  const productIndex = findProductIndex(cart, product.id);\n  \n  if (productIndex === -1) {\n    cart.push({ ...product, quantity: 1 });\n  } else {\n    cart[productIndex].quantity += 1;\n  }\n  \n  saveCart(cart);\n}\n\n    export function removeProduct(productId) {\n    let cart = loadCart();\n\n    cart = cart.filter(item => item.id !== productId);\n\n    saveCart(cart);\n    }\n\nexport function increaseQuantity(productId) {\n  const cart = loadCart();\n  const productIndex = findProductIndex(cart, productId);\n  \n  if (productIndex !== -1) {\n    cart[productIndex].quantity += 1;\n    saveCart(cart);\n  }\n}\n\nexport function decreaseQuantity(productId) {\n  const cart = loadCart();\n  const productIndex = findProductIndex(cart, productId);\n  \n  if (productIndex !== -1) {\n    if (cart[productIndex].quantity > 1) {\n      cart[productIndex].quantity -= 1;\n    } else {\n      removeProduct(productId);\n    }\n    saveCart(cart);\n  }\n}\n\nexport function getCart() {\n  return loadCart();\n}\n\nexport function clearCart() {\n  localStorage.removeItem(cartKey);\n}\n\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AAEA,MAAM,UAAU;AAET,SAAS;IACd,MAAM,aAAa,aAAa,OAAO,CAAC;IACxC,OAAO,aAAa,KAAK,KAAK,CAAC,cAAc,EAAE;AACjD;AAEO,SAAS,SAAS,IAAI;IAC3B,aAAa,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC;AAC/C;AAEO,SAAS,iBAAiB,IAAI,EAAE,SAAS;IAC9C,OAAO,KAAK,SAAS,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK;AAC5C;AAEO,SAAS,WAAW,OAAO;IAChC,MAAM,OAAO;IACb,MAAM,eAAe,iBAAiB,MAAM,QAAQ,EAAE;IAEtD,IAAI,iBAAiB,CAAC,GAAG;QACvB,KAAK,IAAI,CAAC;YAAE,GAAG,OAAO;YAAE,UAAU;QAAE;IACtC,OAAO;QACL,IAAI,CAAC,aAAa,CAAC,QAAQ,IAAI;IACjC;IAEA,SAAS;AACX;AAEW,SAAS,cAAc,SAAS;IACvC,IAAI,OAAO;IAEX,OAAO,KAAK,MAAM,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK;IAEvC,SAAS;AACT;AAEG,SAAS,iBAAiB,SAAS;IACxC,MAAM,OAAO;IACb,MAAM,eAAe,iBAAiB,MAAM;IAE5C,IAAI,iBAAiB,CAAC,GAAG;QACvB,IAAI,CAAC,aAAa,CAAC,QAAQ,IAAI;QAC/B,SAAS;IACX;AACF;AAEO,SAAS,iBAAiB,SAAS;IACxC,MAAM,OAAO;IACb,MAAM,eAAe,iBAAiB,MAAM;IAE5C,IAAI,iBAAiB,CAAC,GAAG;QACvB,IAAI,IAAI,CAAC,aAAa,CAAC,QAAQ,GAAG,GAAG;YACnC,IAAI,CAAC,aAAa,CAAC,QAAQ,IAAI;QACjC,OAAO;YACL,cAAc;QAChB;QACA,SAAS;IACX;AACF;AAEO,SAAS;IACd,OAAO;AACT;AAEO,SAAS;IACd,aAAa,UAAU,CAAC;AAC1B"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/service/UserCartService.js"],"sourcesContent":["\"use client\";\n\nimport { useSelector } from \"react-redux\";\nimport { axiosInstance } from \"../api/axios\";\n\nfunction UserCartService() {\n  const token = useSelector((state) => state.session.token);\n\n  const cartKey = 'shopflow';\n\n  const getHeaders = () => ({\n    Authorization: `Bearer ${token}`,\n    'Content-Type': 'application/json',\n  });\n\n  this.loadCart = function() {\n    const storedCart = localStorage.getItem(cartKey);\n    return storedCart ? JSON.parse(storedCart) : [];\n  };\n\n  this.saveCart = function(cart) {\n    localStorage.setItem(cartKey, JSON.stringify(cart));\n  };\n\n  this.migrateCart = async function(userId) {\n    const guestCart = this.loadCart();\n\n    if (guestCart.length > 0) {\n      for (const item of guestCart) {\n        try {\n          await this.addItemToCart(userId, item.productId, item.quantity);\n        } catch (error) {\n          console.error('Error migrating cart item:', error);\n        }\n      }\n      this.clearCart();\n    }\n  };\n\n  this.addItemToCart = async function(userId, productId, quantity = 1) {\n    console.log(userId);\n    console.log(productId);\n    try {\n      const response = await axiosInstance.post(\n        // `/user/cart/addItemToCart?userId=${userId}&productId==${userId}4&quantity=${quantity}`, \n        `/user/cart/addItemToCart`,\n       {},\n        {\n          params:{\n            \n              userId,\n              productId,\n              quantity\n             \n          },\n          headers: getHeaders()\n        }\n      );\n      \n\n        return response.data;\n    \n    \n    } catch (error) {\n      console.error('Error adding item to cart:', error);\n      throw error.response ? error.response.data : new Error('Network or server error');\n    }\n  };\n\n  this.viewCart = async function(userId) {\n    try {\n      const response = await axiosInstance.get('/user/cart/viewCart', {\n        params: { userId },\n        headers: getHeaders(),\n      });\n\n      if (response.status === 200) {\n        return response.data.data || [];\n      } else {\n        throw new Error(response.data.message || 'Failed to retrieve cart');\n      }\n    } catch (error) {\n      console.error('Error viewing cart:', error);\n      throw error.response ? error.response.data : new Error('Network or server error');\n    }\n  };\n\n  this.deleteFromCart = async function(userId, productId) {\n    try {\n      const response = await axiosInstance.delete('/user/cart/deleteFromCart', {\n        params: { userId, productId },\n        headers: getHeaders(),\n      });\n\n      if (response.status === 200) {\n        return response.data;\n      } else {\n        throw new Error(response.data.message || 'Failed to delete item from cart');\n      }\n    } catch (error) {\n      console.error('Error deleting item from cart:', error);\n      throw error.response ? error.response.data : new Error('Network or server error');\n    }\n  };\n\n  this.updateCartCount = async function(userId, productId, operation) {\n    try {\n      const response = await axiosInstance.put('/user/cart/cartCount', {}, {\n        params: { userId, productId, operation },\n        headers: getHeaders(),\n      });\n      console.log(response.status)\n      if (response.status === 200) {\n        return response.data;\n      } else {\n        throw new Error(response.data || 'Failed to update cart count');\n      }\n    } catch (error) {\n      console.error('Error updating cart count:', error);\n      throw error;\n    }\n  };\n\n  this.clearCart = function() {\n    localStorage.removeItem(cartKey);\n  };\n}\n\nexport default UserCartService;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 221, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/service/OrderService.js"],"sourcesContent":["import {axiosInstance} from '../api/axios';\n\nexport const createOrder = async (userId, items) => {\n  try {\n    const response = await axiosInstance.post('/user/order/createOrder', { userId, items });\n    return response.data;\n  } catch (error) {\n    console.error('Error creating order:', error);\n    throw new Error(error?.response?.data?.message || 'Error creating order.');\n  }\n};\n\nexport const verifyPaymentAndUpdateOrder = async (orderId,razorpayId, paymentId, paymentSignature) => {\n    console.log(\"order_id:\",orderId);\n    console.log(\"razorpayId:\",razorpayId);\n    console.log(\"paymentId:\",paymentId);\n    console.log(\"siign:\",paymentSignature);\n  try {\n    const response = await axiosInstance.post('/user/order/verify', {}\n    ,\n    {\n        params:{\n            orderId,\n            razorpayId,\n            paymentId,\n            paymentSignature,\n        }\n    }\n    \n);\n    return response.data;\n  } catch (error) {\n    console.error('Error verifying payment:', error);\n    throw new Error(error?.response?.data?.message || 'Error verifying payment.');\n  }\n};\n\nexport const checkOutOrder = async (orderId) => {\n    console.log(\"orderid:\",orderId)\n  try { \n    const response = await axiosInstance.post(`/user/order/checkoutOrder?orderId=${orderId}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching user orders:', error);\n    throw new Error(error?.response?.data?.message || 'Error fetching user orders.');\n  }\n};\nexport const getOrderByUserId = async (userId) => {\n    console.log(\"userId:\", userId);\n    try {\n      const response = await axiosInstance.get(`/user/order/getUserOrder?userId=${userId}`\n       \n      );\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching user orders:', error);\n      throw new Error(error?.response?.data?.message || 'Error fetching user orders.');\n    }\n  };\nexport const cancelOrder = async (orderId) => {\n    console.log(orderId);\n  try {\n    const response = await axiosInstance.put(`/user/order/${orderId}/cancel?orderId=${orderId}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error cancelling order:', error);\n    throw new Error(error?.response?.data?.message || 'Error cancelling order.');\n  }\n};\n"],"names":[],"mappings":";;;;;;;AAAA;;AAEO,MAAM,cAAc,OAAO,QAAQ;IACxC,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,IAAI,CAAC,2BAA2B;YAAE;YAAQ;QAAM;QACrF,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AAEO,MAAM,8BAA8B,OAAO,SAAQ,YAAY,WAAW;IAC7E,QAAQ,GAAG,CAAC,aAAY;IACxB,QAAQ,GAAG,CAAC,eAAc;IAC1B,QAAQ,GAAG,CAAC,cAAa;IACzB,QAAQ,GAAG,CAAC,UAAS;IACvB,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,IAAI,CAAC,sBAAsB,CAAC,GAEjE;YACI,QAAO;gBACH;gBACA;gBACA;gBACA;YACJ;QACJ;QAGA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AAEO,MAAM,gBAAgB,OAAO;IAChC,QAAQ,GAAG,CAAC,YAAW;IACzB,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,IAAI,CAAC,CAAC,kCAAkC,EAAE,SAAS;QACxF,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AACO,MAAM,mBAAmB,OAAO;IACnC,QAAQ,GAAG,CAAC,WAAW;IACvB,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,GAAG,CAAC,CAAC,gCAAgC,EAAE,QAAQ;QAGpF,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AACK,MAAM,cAAc,OAAO;IAC9B,QAAQ,GAAG,CAAC;IACd,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,GAAG,CAAC,CAAC,YAAY,EAAE,QAAQ,gBAAgB,EAAE,SAAS;QAC3F,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF"}},
    {"offset": {"line": 295, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 301, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/cart/Cart.js"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { \n  decreaseQuantity as guestDecreaseQuantity, \n  getCart as guestGetCart, \n  increaseQuantity as guestIncreaseQuantity, \n  removeProduct as guestRemoveProduct \n} from '../service/GuestCartService';\nimport UserCartService from '../service/UserCartService';\nimport { useSelector } from 'react-redux';\nimport { useRouter } from 'next/navigation';\nimport { createOrder } from '../service/OrderService';\n\nconst Cart = () => {\n  const [products, setProducts] = useState([]);\n  const [totalBill, setTotalBill] = useState(0);\n  const [error, setError] = useState(null);\n  const [loadingCheckout, setLoadingCheckout] = useState(false); // Checkout loading state\n\n  const [loading, setLoading] = useState(true); // Cart loading state\n  const userCartService = new UserCartService();\n  const isLoggedIn = useSelector(state => state.session.user);\n  const router = useRouter();\n\n  useEffect(() => {\n    const loadCart = async () => {\n      setLoading(true);\n      try {\n        if (isLoggedIn) {\n          const userCart = await userCartService.viewCart(isLoggedIn.id);\n          setProducts(userCart.items);\n          setTotalBill(userCart.totalAmount);\n          console.log(userCart);\n        } else {\n          const guestCart = typeof window !== 'undefined' ? guestGetCart() : [];\n          setProducts(guestCart);\n        }\n      } catch (err) {\n        setError('Failed to load cart. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadCart();\n  }, [isLoggedIn]);\n\n  const handleIncreaseQuantity = async (productId) => {\n    try {\n      if (isLoggedIn) {\n        await userCartService.updateCartCount(isLoggedIn.id, productId, 'increase');\n        const userCart = await userCartService.viewCart(isLoggedIn.id);\n        setProducts(userCart.items);\n        setTotalBill(userCart.totalAmount);\n      } else {\n        guestIncreaseQuantity(productId);\n        setProducts(guestGetCart());\n      }\n    } catch (err) {\n      setError('Failed to update item quantity. Please try again later.');\n    }\n  };\n\n  const handleDecreaseQuantity = async (productId) => {\n    try {\n      if (isLoggedIn) {\n        await userCartService.updateCartCount(isLoggedIn.id, productId, 'decrease');\n        const userCart = await userCartService.viewCart(isLoggedIn.id);\n        setProducts(userCart.items);\n        setTotalBill(userCart.totalAmount);\n      } else {\n        guestDecreaseQuantity(productId);\n        setProducts(guestGetCart());\n      }\n    } catch (err) {\n      setError('Failed to update item quantity. Please try again later.');\n    }\n  };\n\n  const handleRemoveProduct = async (productId) => {\n    try {\n      if (isLoggedIn) {\n        await userCartService.deleteFromCart(isLoggedIn.id, productId);\n        const userCart = await userCartService.viewCart(isLoggedIn.id);\n        \n        setProducts(userCart.items);\n        setTotalBill(userCart.totalAmount);\n        \n\n      } else {\n        guestRemoveProduct(productId);\n        setProducts(guestGetCart());\n      }\n    } catch (err) {\n      setError('Failed to remove product from cart. Please try again later.');\n    }\n  };\n  const handleNavigation = (order,razorpayOrder) => {\n    const data = {\n      orders: order\n    };\n\n    const encodedData = encodeURIComponent(JSON.stringify(data));\n    // const encodedData2 = encodeURIComponent(JSON.stringify(razorpayOrder));\n\n    router.push(`/checkout?data=${encodedData}`);\n  };\n  const handleCheckout = async () => {\n    setLoadingCheckout(true);\n    try {\n      console.log(products);\n      const items = products?.map(product => ({\n        productId: product.productId,\n        quantity: product.quantity,\n      }));\n      \n      const {order} = await createOrder(isLoggedIn.id, items);\n      \n      console.log(\"order:\",order);\n      handleNavigation(order);\n    } catch (err) {\n      console.error(err);\n      setError('Failed to proceed with checkout. Please try again later.');\n    } finally {\n      setLoadingCheckout(false);\n    }\n  };\n  return (\n    <section className=\"h-1/3 bg-gray-100 py-12 sm:py-16 lg:py-20\">\n      <div className=\"mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex items-center justify-center\">\n          {loading ? (\n            <div className=\"text-center\">Loading...</div> // Show loading text for cart loading\n          ) : products.length > 0 ? (\n            <h1 className=\"text-2xl font-semibold text-gray-900\">Your Cart</h1>\n          ) : (\n            <h1 className=\"text-2xl font-semibold text-gray-900\">Your Cart is empty</h1>\n          )}\n        </div>\n\n        {error && (\n          <div className=\"text-center text-red-500 mt-4\">\n            {error}\n          </div>\n        )}\n\n        <div className=\"mx-auto mt-8 max-w-2xl md:mt-12\">\n          <div className=\"bg-white shadow\">\n            <div className=\"px-4 py-6 sm:px-8 sm:py-10\">\n              <div className=\"flow-root\">\n                <ul className=\"-my-8\">\n                  {products.map((product, index) => (\n                    <CartTile\n                      key={index}\n                      totalBill={totalBill}\n                      product={isLoggedIn ? product.product : product}\n                      index={index}\n                      totalPrice={product?.totalPrice}\n                      onIncreaseQuantity={handleIncreaseQuantity}\n                      onDecreaseQuantity={handleDecreaseQuantity}\n                      onRemoveProduct={handleRemoveProduct}\n                      isLoggedIn={isLoggedIn}\n                      quantity={isLoggedIn ? product.quantity : null}\n                    />\n                  ))}\n                </ul>\n              </div>\n\n              <div className=\"mt-6 border-t border-gray-200 pt-6\">\n                <div className=\"flex justify-between text-base font-medium text-gray-900\">\n                  <p>Total</p>\n                  <p>${isLoggedIn ? totalBill : products?.totalPrice}</p>\n                </div>\n                <div className=\"mt-6 text-center\">\n                <button\n                    type=\"button\"\n                    onClick={handleCheckout}\n                    className={`group inline-flex w-full items-center justify-center rounded-md px-6 py-4 text-lg font-semibold text-white transition-all duration-200 ease-in-out focus:shadow ${loadingCheckout ? 'bg-gray-400 cursor-not-allowed animate-pulse' : 'bg-gray-900 hover:bg-gray-800'}`}\n                    disabled={products.length === 0 || loadingCheckout} \n                  >\n                    {loadingCheckout ? 'Processing...' : 'Checkout'}\n                    {!loadingCheckout && (\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        className=\"group-hover:ml-8 ml-4 h-6 w-6 transition-all\"\n                        fill=\"none\"\n                        viewBox=\"0 0 24 24\"\n                        stroke=\"currentColor\"\n                        strokeWidth=\"2\"\n                      >\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M13 7l5 5m0 0l-5 5m5-5H6\" />\n                      </svg>\n                    )}\n                  </button>\n                  {/* Add message if cart is empty */}\n                  {products.length === 0 && !loading && (\n                    <p className=\"mt-4 text-gray-600\">Add items to your cart to checkout</p>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default Cart;\n\nfunction CartTile({\n  product = [],\n  isLoggedIn,\n  index,\n  totalPrice,\n  totalBill,\n  onIncreaseQuantity,\n  onDecreaseQuantity,\n  onRemoveProduct,\n  quantity,\n}) {\n  const [loadingQuantity, setLoadingQuantity] = useState(false); // Loading state for quantity change\n\n  const handleIncrease = async (productId) => {\n    setLoadingQuantity(true);\n    await onIncreaseQuantity(productId);\n    setLoadingQuantity(false);\n  };\n\n  const handleDecrease = async (productId) => {\n    setLoadingQuantity(true);\n    await onDecreaseQuantity(productId);\n    setLoadingQuantity(false);\n  };\n\n  return (\n    <li key={index} className=\"flex flex-col space-y-3 py-6 text-left sm:flex-row sm:space-x-5 sm:space-y-0\">\n      <div className=\"shrink-0\">\n        <img className=\"h-24 w-24 max-w-full rounded-lg object-cover\" src={product?.image || \"/_assets/image.png\"} alt={product.name} />\n      </div>\n\n      <div className=\"relative flex flex-1 flex-col justify-between\">\n        <div className=\"sm:col-gap-5 sm:grid sm:grid-cols-2\">\n          <div className=\"pr-8 sm:pr-5\">\n            <p className=\"text-base font-semibold text-gray-900\">{product.name}</p>\n            <p className=\"mx-0 mt-1 mb-0 text-sm text-gray-400\">\n              Quantity: {isLoggedIn ? (loadingQuantity ? '...' : quantity) : (loadingQuantity ? '...' : product.quantity)}\n            </p>\n          </div>\n\n          <div className=\"mt-4 flex items-end justify-between sm:mt-0 sm:items-start sm:justify-end\">\n            <p className=\"shrink-0 w-20 text-base font-semibold text-gray-900 sm:order-2 sm:ml-8 sm:text-right\">\n              ${isLoggedIn ? totalPrice : product.totalPrice?.toFixed(2)}\n            </p>\n\n            <div className=\"sm:order-1\">\n              <div className={`mx-auto  rounded-md flex h-8 items-stretch text-gray-600 ${loadingQuantity ? 'border-2 border-blue-500  animate-pulse' : ''}`}>\n                <button\n                  onClick={() => handleDecrease(product.id)}\n                  className=\"flex items-center justify-center rounded-l-md bg-gray-200 px-4 transition hover:bg-black hover:text-white\"\n                  disabled={loadingQuantity}\n                >\n                -\n                </button>\n                <div className=\"flex w-full items-center justify-center bg-gray-100 px-4 text-xs uppercase transition\">\n                  {loadingQuantity ? '...' : (isLoggedIn ? quantity : product.quantity)}\n                </div>\n                <button\n                  onClick={() => handleIncrease(product.id)}\n                  className=\"flex items-center justify-center rounded-r-md bg-gray-200 px-4 transition hover:bg-black hover:text-white\"\n                  disabled={loadingQuantity}\n                >\n                   +\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"absolute top-0 right-0 flex sm:bottom-0 sm:top-auto\">\n          <button\n            onClick={() => onRemoveProduct(product.id)}\n            type=\"button\"\n            className=\"flex rounded p-2 text-center text-gray-500 transition-all duration-200 ease-in-out focus:shadow hover:text-gray-900\"\n          >\n            <svg\n              className=\"h-5 w-5\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n      </div>\n    </li>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 825, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 831, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/cart/page.js"],"sourcesContent":["\"use client\"\nimport React from 'react'\nimport Cart from './Cart'\nexport default function page() {\n  return (\n    <div>\n      <Cart/>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AAFA;;;;AAGe,SAAS;IACtB,qBACE,6LAAC;kBACC,cAAA,6LAAC,6HAAA,CAAA,UAAI;;;;;;;;;;AAGX"}},
    {"offset": {"line": 857, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}