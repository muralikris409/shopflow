{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/service/PaymentService.js"],"sourcesContent":["import { axiosInstance } from \"../api/axios\";\n\nexport const createOrder = async (userId, items) => {\n  try {\n    const response = await axiosInstance.post(\"user/order/createOrder\", {\n      userId,\n      items,\n    });\n    console.log(response);\n\n    if (response.status !== 201) {\n      throw new Error(\"Error creating order\");\n    }\n\n    return response.data; // Return the response data directly\n  } catch (error) {\n    console.error(\"Error in createOrder:\", error);\n    throw error;\n  }\n};\n\nexport const verifyPayment = async (orderId,razorpayId, paymentId, paymentSignature) => {\n    console.log(orderId);\n    console.log(paymentId);\n    console.log(paymentSignature)\n  try {\n    const response = await axiosInstance.post(\"user/order/verify\", {\n    },\n    {\n        params:{\n            razorpayId,\n            orderId,\n            paymentId,\n            paymentSignature,\n        }\n    }\n\n);\n\n\n  \n\n    return response.data; \n  } catch (error) {\n    console.error(\"Error in verifyPayment:\", error);\n    throw error;\n  }\n};\nexport const failedVerify = async (orderId) => {\n    console.log(\"orderid:\",orderId)\n  try { \n    const response = await axiosInstance.post(`/user/order/failedVerify?orderId=${orderId}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching user orders:', error);\n    throw new Error(error?.response?.data?.message || 'Error fetching user orders.');\n  }\n};"],"names":[],"mappings":";;;;;AAAA;;AAEO,MAAM,cAAc,OAAO,QAAQ;IACxC,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,IAAI,CAAC,0BAA0B;YAClE;YACA;QACF;QACA,QAAQ,GAAG,CAAC;QAEZ,IAAI,SAAS,MAAM,KAAK,KAAK;YAC3B,MAAM,IAAI,MAAM;QAClB;QAEA,OAAO,SAAS,IAAI,EAAE,oCAAoC;IAC5D,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM;IACR;AACF;AAEO,MAAM,gBAAgB,OAAO,SAAQ,YAAY,WAAW;IAC/D,QAAQ,GAAG,CAAC;IACZ,QAAQ,GAAG,CAAC;IACZ,QAAQ,GAAG,CAAC;IACd,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,IAAI,CAAC,qBAAqB,CAC/D,GACA;YACI,QAAO;gBACH;gBACA;gBACA;gBACA;YACJ;QACJ;QAOA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,MAAM;IACR;AACF;AACO,MAAM,eAAe,OAAO;IAC/B,QAAQ,GAAG,CAAC,YAAW;IACzB,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,IAAI,CAAC,CAAC,iCAAiC,EAAE,SAAS;QACvF,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF"}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/service/OrderService.js"],"sourcesContent":["import {axiosInstance} from '../api/axios';\n\nexport const createOrder = async (userId, items) => {\n  try {\n    const response = await axiosInstance.post('/user/order/createOrder', { userId, items });\n    return response.data;\n  } catch (error) {\n    console.error('Error creating order:', error);\n    throw new Error(error?.response?.data?.message || 'Error creating order.');\n  }\n};\n\nexport const verifyPaymentAndUpdateOrder = async (orderId,razorpayId, paymentId, paymentSignature) => {\n    console.log(\"order_id:\",orderId);\n    console.log(\"razorpayId:\",razorpayId);\n    console.log(\"paymentId:\",paymentId);\n    console.log(\"siign:\",paymentSignature);\n  try {\n    const response = await axiosInstance.post('/user/order/verify', {}\n    ,\n    {\n        params:{\n            orderId,\n            razorpayId,\n            paymentId,\n            paymentSignature,\n        }\n    }\n    \n);\n    return response.data;\n  } catch (error) {\n    console.error('Error verifying payment:', error);\n    throw new Error(error?.response?.data?.message || 'Error verifying payment.');\n  }\n};\n\nexport const checkOutOrder = async (orderId) => {\n    console.log(\"orderid:\",orderId)\n  try { \n    const response = await axiosInstance.post(`/user/order/checkoutOrder?orderId=${orderId}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching user orders:', error);\n    throw new Error(error?.response?.data?.message || 'Error fetching user orders.');\n  }\n};\nexport const getOrderByUserId = async (userId) => {\n    console.log(\"userId:\", userId);\n    try {\n      const response = await axiosInstance.get(`/user/order/getUserOrder?userId=${userId}`\n       \n      );\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching user orders:', error);\n      throw new Error(error?.response?.data?.message || 'Error fetching user orders.');\n    }\n  };\nexport const cancelOrder = async (orderId) => {\n    console.log(orderId);\n  try {\n    const response = await axiosInstance.put(`/user/order/cancelOrder?orderId=${orderId}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error cancelling order:', error);\n    throw new Error(error?.response?.data?.message || 'Error cancelling order.');\n  }\n};\nexport const getOrderById = async (orderId) => {\n  console.log(\"userId:\", orderId);\n  try {\n    const response = await axiosInstance.get(`/user/order/getOrderById?orderId=${orderId}`\n     \n    );\n    console.log(response.data);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching user orders:', error);\n    throw new Error(error?.response?.data?.message || 'Error fetching user orders.');\n  }\n};"],"names":[],"mappings":";;;;;;;;AAAA;;AAEO,MAAM,cAAc,OAAO,QAAQ;IACxC,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,IAAI,CAAC,2BAA2B;YAAE;YAAQ;QAAM;QACrF,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AAEO,MAAM,8BAA8B,OAAO,SAAQ,YAAY,WAAW;IAC7E,QAAQ,GAAG,CAAC,aAAY;IACxB,QAAQ,GAAG,CAAC,eAAc;IAC1B,QAAQ,GAAG,CAAC,cAAa;IACzB,QAAQ,GAAG,CAAC,UAAS;IACvB,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,IAAI,CAAC,sBAAsB,CAAC,GAEjE;YACI,QAAO;gBACH;gBACA;gBACA;gBACA;YACJ;QACJ;QAGA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AAEO,MAAM,gBAAgB,OAAO;IAChC,QAAQ,GAAG,CAAC,YAAW;IACzB,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,IAAI,CAAC,CAAC,kCAAkC,EAAE,SAAS;QACxF,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AACO,MAAM,mBAAmB,OAAO;IACnC,QAAQ,GAAG,CAAC,WAAW;IACvB,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,GAAG,CAAC,CAAC,gCAAgC,EAAE,QAAQ;QAGpF,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AACK,MAAM,cAAc,OAAO;IAC9B,QAAQ,GAAG,CAAC;IACd,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,GAAG,CAAC,CAAC,gCAAgC,EAAE,SAAS;QACrF,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AACO,MAAM,eAAe,OAAO;IACjC,QAAQ,GAAG,CAAC,WAAW;IACvB,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,GAAG,CAAC,CAAC,iCAAiC,EAAE,SAAS;QAGtF,QAAQ,GAAG,CAAC,SAAS,IAAI;QACzB,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF"}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/service/UserService.js"],"sourcesContent":["import { axiosInstance as axios, axiosInstance } from \"../api/axios\";\n\nexport async function login(formdata) {\n    const { email, password } = formdata;\n  \n    try {\n        const response = await axios.post(\"user/login\", {\n            email: email,\n            password: password\n        });\n\n        const { token, data } = response.data;\n\n        localStorage.setItem(\"shopflow_session\", JSON.stringify({ user: data, token }));\n        return { data, token };\n    } catch (error) {\n        \n            throw new Error(error.response.data.message || \"An error occurred during login.\");\n       \n    }\n}\n\nexport async function signUp(formdata) {\n    const { username: name, email, password } = formdata;\n\n    try {\n        const response = await axios.post(\"user/signup\", {\n            name,\n            email,\n            password\n        }, {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        });\n\n        return response.data;\n    } catch (error) {\n       \n            throw new Error(error.response.data.message || \"An error occurred during sign-up.\");\n        \n    }\n}\n\nexport async function googleOAuth(data) {\n    try {\n        const response = await axios.post(\"user/oauth\", {\n            name: data.name,\n            email: data.email,\n            image: data.image,\n            id: data.id\n        });\n\n        const { token, data: user } = response.data;\n\n        localStorage.setItem(\"shopflow_session\", JSON.stringify({ user: user, token }));\n        return response.data;\n    } catch (error) {\n       \n            throw new Error(error.response.data.message || \"An error occurred during Google OAuth.\");\n       \n    }\n}\n\nexport async function forgotPassword(email) {\n  try {\n    const response = await axiosInstance.post(`user/forgotPassword?email=${email}`);\n    console.log(response)\n    if (response.status === 200) {\n      return {\n        ok: true,\n        data: response.data,\n      };\n    }\n    return {\n      ok: false,\n      message: response.data?.message || \"Something went wrong.\",\n    };\n  } catch (err) {\n    console.log(err)\n    throw err;\n  }\n}\nexport async function resetPassword(token,password){\n    try{\n    const response=await axiosInstance.post(`user/resetPassword?token=${token}&newPassword=${password}`);\n        return response;\n    console.log(response);\n   \n}\ncatch(err){\n    console.log(err);\n}\n}\nexport async function getProfileInfo(token,userId){\n    try{\n        console.log(\"test\")\n    const response=await axiosInstance.post(`user/userProfileInfo?userId=${userId}`,{},{\n        headers:{\n            Authorization:`Bearer ${token}`\n        }\n    });\n    console.log(response);\n        return response;\n   \n}\ncatch(err){\n    console.log(err);\n}\n}\nexport async function updateProfileInfo(token,userId,data){\n    try{\n        console.log(\"test\")\n    const response=await axiosInstance.post(`user/updateUserProfile?userId=${userId}`,\n        data\n        \n\n    ,{\n        headers:{\n            Authorization:`Bearer ${token}`,\n            'Content-Type': 'multipart/form-data',\n\n        }\n    });\n    console.log(response);\n        return response;\n    \n   \n}\ncatch(err){\n    console.log(err);\n    \n}\n}\n\n\nexport async function fetchUserAddresses (token,userId){\n    \n  try {\nconsole.log(\"token\",token);\n\n    const response = await axiosInstance.post(`user/getAllAddress?userId=${userId}`,{}, {\n      \n      headers:{\n        Authorization:`Bearer ${token}`\n    }\n    });\n    console.log(response)\n    return response.data; \n  } catch (error) {\n    console.error(\"Error fetching addresses:\", error);\n    return { error: error.message || \"Something went wrong!\" };\n  }\n};\nexport const makeAddressPrimary = async (token,userId,addressId) => {\n    try {\n      const response = await axiosInstance.post(`user/makePrimaryAddress`,{}, {\n        params: { userId,addressId },\n        headers:{\n          Authorization:`Bearer ${token}`\n      }\n      });\n      console.log(response)\n      return response.data; \n    } catch (error) {\n      console.error(\"Error fetching addresses:\", error);\n      return { error: error.message || \"Something went wrong!\" };\n    }\n  };\n\nexport const addAddress = async (token, userId, addressData) => {\n  try {\n    const { street, city, state, country, zip, isPrimary } = addressData;\n\n    const response = await axiosInstance.post(\n      'user/addAddress',\n      {},\n      {\n        params: {\n          userId,\n          street,\n          city,\n          state,\n          country,\n          zip,\n          isPrimary,\n        },\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      }\n    );\n   \n    return response.data; \n  } catch (error) {\n    console.error(\"Error adding address:\", error);\n    return { error: error.response?.data?.message || \"Something went wrong!\" };\n  }\n};\nexport const updateAddress = async (token, userId, addressId,addressData) => {\n    try {\n      const { street, city, state, country, zip, isPrimary } = addressData;\n  \n      const response = await axiosInstance.post(\n        'user/editAddress',\n        {\n\n        },\n        {\n            \n          params: {\n            userId,\n            addressId,\n            street,\n            city,\n            state,\n            country,\n            zip,\n            isPrimary,\n          },\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n     \n      return response.data; \n    } catch (error) {\n      console.error(\"Error adding address:\", error);\n      return { error: error.response?.data?.message || \"Something went wrong!\" };\n    }\n  };\n  export const removeAddress = async (token, userId, addressId) => {\n    try {\n  \n      const response = await axiosInstance.post(\n        'user/deleteAddress',\n        {},\n        {\n          params: {\n            userId,\n            addressId\n          },\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n     \n      return response.data; \n    } catch (error) {\n      console.error(\"Error adding address:\", error);\n      return { error: error.response?.data?.message || \"Something went wrong!\" };\n    }\n  };"],"names":[],"mappings":"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"}},
    {"offset": {"line": 399, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 405, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/checkout/Checkout.js"],"sourcesContent":["// import React, { useState, useEffect } from 'react';\n// import { createOrder, failedVerify, verifyPayment } from '../service/PaymentService';  \n// import { checkOutOrder, getOrderById, verifyPaymentAndUpdateOrder } from '../service/OrderService';\n// import { useRouter } from 'next/navigation';\n\n// const OrderSummary = ({ \n//   title, \n \n//   userId,\n//   orders,\n \n//   totalBill \n// }) => {\n//   const router = useRouter();\n//   const [loading, setLoading] = useState(false);\n//   const [error, setError] = useState(null);\n//   const [orderData, setOrderData] = useState(orders?.orders?.order?.items || orders?.orders?.items);\n//   const [formData, setFormData] = useState({\n//     fullName: '',\n//     streetAddress: '',\n//     city: '',\n//     state: '',\n//     zip: '',\n//     country: '',\n//   });\n//   const [formErrors, setFormErrors] = useState({});\n\n//   useEffect(() => {\n//     const script = document.createElement('script');\n//     script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n//     document.body.appendChild(script);\n//     return () => {\n//       document.body.removeChild(script);\n//     };\n//   }, [userId]);\n\n//   const validateField = (name, value) => {\n//     let error = '';\n//     if (!value.trim()) {\n//       error = `${name.replace(/([A-Z])/g, ' $1')} is required.`;\n//     } else {\n//       switch (name) {\n//         case 'zip':\n//           if (!/^[0-9]{5,6}$/.test(value)) {\n//             error = 'ZIP code must be 5-6 digits.';\n//           }\n//           break;\n//         case 'fullName':\n//           if (value.length < 3) {\n//             error = 'Full Name must be at least 3 characters long.';\n//           }\n//           break;\n//         default:\n//           break;\n//       }\n//     }\n//     setFormErrors((prevErrors) => ({ ...prevErrors, [name]: error }));\n//     return !error;\n//   };\n\n//   const validateForm = () => {\n//     const fields = Object.keys(formData);\n//     let isValid = true;\n//     fields.forEach((field) => {\n//       const valid = validateField(field, formData[field]);\n//       if (!valid) isValid = false;\n//     });\n//     return isValid;\n//   };\n//   const handleSuccess=()=>{\n//     router.push(`/orders/success`);\n\n//   }\n//   const handleInputChange = (e) => {\n//     const { name, value } = e.target;\n//     setFormData((prevData) => ({\n//       ...prevData,\n//       [name]: value,\n//     }));\n//     validateField(name, value);\n//   };\n\n//   const handlePayment = async () => {\n//     if (!validateForm()) {\n//       setError('Please fix the highlighted errors before proceeding.');\n//       return;\n//     }\n  \n//     setLoading(true);\n//     setError(null);\n  \n//     try {\n//       const { razorpayOrder, ...data } = await checkOutOrder(orders?.orders?.order?.id || orders?.orders.id);\n//       const options = {\n//         key: 'rzp_test_nTbKdtgjeOQLhc',\n//         amount: Math.ceil(totalBill * 100),\n//         currency: razorpayOrder?.currency,\n//         name: 'Your Shop',\n//         description: 'Payment for your order',\n//         order_id: razorpayOrder?.id,\n//         handler: async function (response) {\n//           const { razorpay_payment_id, razorpay_signature, razorpay_order_id } = response;\n  \n//           try {\n//             const verificationResult = await verifyPaymentAndUpdateOrder(\n//               orders?.orders?.order?.id || orders?.orders.id,\n\n//               razorpay_order_id,\n//               razorpay_payment_id,\n//               razorpay_signature\n//             );\n  \n//             if (verificationResult.success) {\n//               handleSuccess();\n//             } else {\n//               await failedVerify(orders?.orders?.order?.id || orders?.orders.id);\n//               setError('Payment verification failed. Please try again.');\n//             }\n//           } catch (error) {\n//             setError('An unexpected error occurred during verification. Please try again.');\n//           }\n//         },\n//         prefill: {\n//           name: formData.fullName,\n//           email: 'customer@example.com',\n//           contact: '1234567890',\n//         },\n//         theme: {\n//           color: '#F37254',\n//         },\n//         modal: {\n//           ondismiss: async () => {\n//             try {\n//               // await failedVerify(orders?.orders?.order?.id || orders?.orders.id);\n//               setError('Payment was cancelled by the user. Please try again.');\n//             } catch (error) {\n//               setError('An error occurred while handling payment cancellation. Please contact support.');\n//             }\n//           },\n//         },\n//       };\n  \n//       const rzp = new window.Razorpay(options);\n//       rzp.open();\n//     } catch (err) {\n//       setError('Payment process failed. Please try again.');\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n  \n  \n//   return (\n//     <div className=\"bg-gray-100\">\n//       {error && <div className=\"bg-red-500 text-white p-4 rounded mb-4\">{error}</div>}\n\n//       <div className=\"p-6 shadow-md bg-white\">\n//         <h1 className=\"text-xl font-semibold\">{title}</h1>\n//         <div className=\"mt-4 grid lg:grid-cols-12 gap-4\">\n\n//           <div className=\"lg:col-span-7 bg-white p-4 shadow-sm rounded\">\n//             <h2 className=\"text-lg font-medium mb-4\">Delivery Address</h2>\n//             {Object.keys(formData)?.map((key) => (\n//               <div key={key} className=\"mb-3\">\n//                 <label className=\"block text-sm font-medium capitalize\" htmlFor={key}>{key.replace(/([A-Z])/g, ' $1')}</label>\n//                 <input\n//                   type=\"text\"\n//                   id={key}\n//                   name={key}\n//                   className={`w-full rounded border p-2 text-sm ${formErrors[key] ? 'border-red-500' : 'border-gray-300'} focus:ring-2 focus:ring-blue-400`}\n//                   placeholder={`Enter ${key}`}\n//                   value={formData[key]}\n//                   onChange={handleInputChange}\n//                 />\n//                 {formErrors[key] && <p className=\"text-sm text-red-500 mt-1\">{formErrors[key]}</p>}\n//               </div>\n//             ))}\n//           </div>\n\n//           <div className=\"lg:col-span-5 bg-white p-4 shadow-sm rounded\">\n//             <h2 className=\"text-lg font-medium mb-4\">Order Summary</h2>\n//             {orderData?.map((item, index) => (\n//               <div key={index} className=\"flex items-center mb-4\">\n//                 <img\n//                   className=\"w-20 h-20 object-cover rounded border\"\n//                   src={item.product?.image || '/_assets/image.png'}\n//                   alt={item.product?.name}\n//                 />\n//                 <div className=\"ml-4\">\n//                   <h3 className=\"text-sm font-medium\">{item.product?.name}</h3>\n//                   <p className=\"text-sm text-gray-500\">{item.product?.description}</p>\n//                   <p className=\"text-sm font-bold\">${item.product?.offerPrice}</p>\n//                 </div>\n//               </div>\n//             ))}\n//             <div className=\"border-t pt-4\">\n//               <p className=\"font-medium text-lg\">Total: ${totalBill}</p>\n//             </div>\n//           </div>\n\n//         </div>\n\n//         <div className=\"mt-6 text-center\">\n//           <button\n//             className={`w-full p-3 rounded text-white ${loading ? 'bg-gray-500' : 'bg-gray-900'} hover:bg-gray-800`}\n//             disabled={loading}\n//             onClick={handlePayment}\n//           >\n//             {loading ? 'Processing...' : 'Proceed to Payment'}\n//           </button>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default OrderSummary;\nimport React, { useState, useEffect } from 'react';\nimport { createOrder, failedVerify, verifyPayment } from '../service/PaymentService';  \nimport { checkOutOrder, verifyPaymentAndUpdateOrder } from '../service/OrderService';\nimport { fetchUserAddresses, addAddress } from '../service/UserService';\nimport { useRouter } from 'next/navigation';\nimport { useSelector } from 'react-redux';\n\nconst OrderSummary = ({ title, userId, orders, totalBill }) => {\n  const router = useRouter();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const phoneNumber = useSelector(state => state?.session?.user?.phone);\n  const [orderData, setOrderData] = useState(orders?.orders?.order?.items || orders?.orders?.items);\n  const [phone, setPhone] = useState(phoneNumber || '');\n  const [phoneError, setPhoneError] = useState('');\n  const [addresses, setAddresses] = useState([]);\n  const [selectedAddress, setSelectedAddress] = useState(null);\n  const [showForm, setShowForm] = useState(false);\n  const token = useSelector(state => state?.session?.token);\n  const [newAddress, setNewAddress] = useState({\n    street: '',\n    city: '',\n    state: '',\n    country: '',\n    zip: '',\n  });\n  const [formErrors, setFormErrors] = useState({});\n\n  useEffect(() => {\n    const script = document.createElement('script');\n    script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n    document.body.appendChild(script);\n    loadAddresses();\n    return () => {\n      document.body.removeChild(script);\n    };\n  }, [userId]);\n\n  const loadAddresses = async () => {\n    setLoading(true);\n    const result = await fetchUserAddresses(token, userId);\n    console.log(result)\n    if (result.status === \"success\") {\n      setAddresses(result.data);\n      const primaryAddress = result.data.find((addr) => addr.isPrimary);\n      if (primaryAddress) setSelectedAddress(primaryAddress);\n    } else {\n      console.error(result?.message || \"Error retrieving address\");\n    }\n    setLoading(false);\n  };\n\n  const validatePhone = () => {\n    if (!phone.trim() || !/^\\d{10}$/.test(phone)) {\n      return 'Valid phone number is required (10 digits).';\n    }\n    return '';\n  };\n\n  const validateField = (name, value) => {\n    let error = '';\n    if (!value?.trim()) {\n      error = `${name.replace(/([A-Z])/g, ' $1')} is required.`;\n    } else {\n      switch (name) {\n        case 'zip':\n          if (!/^[0-9]{5,6}$/.test(value)) {\n            error = 'ZIP code must be 5-6 digits.';\n          }\n          break;\n        default:\n          break;\n      }\n    }\n    setFormErrors((prevErrors) => ({ ...prevErrors, [name]: error }));\n    return !error;\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setNewAddress((prevData) => ({ ...prevData, [name]: value }));\n    validateField(name, value);\n  };\n\n  const handleAddAddress = async () => {\n    const isValid = Object.keys(newAddress).every((field) =>\n      validateField(field, newAddress[field])\n    );\n\n    if (!isValid) return;\n\n    try {\n      const result = await addAddress(token,userId, newAddress);\n      if (result.status === \"success\") {\n        loadAddresses();\n        setShowForm(false);\n        setNewAddress({\n          street: '',\n          city: '',\n          state: '',\n          country: '',\n          zip: '',\n        });\n      } else {\n        console.error(result.message);\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handlePayment = async () => {\n    const phoneValidationError = validatePhone();\n    if (phoneValidationError || !selectedAddress) {\n      setError('Please provide a valid phone number and select an address.');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const { razorpayOrder, ...data } = await checkOutOrder(orders?.orders?.order?.id || orders?.orders.id);\n      const options = {\n        key: 'rzp_test_HLBu4adubXpVrg',\n        amount: Math.ceil(totalBill * 100),\n        currency: razorpayOrder?.currency,\n        name: 'Your Shop',\n        description: 'Payment for your order',\n        order_id: razorpayOrder?.id,\n        handler: async function (response) {\n          const { razorpay_payment_id, razorpay_signature, razorpay_order_id } = response;\n\n          try {\n            const verificationResult = await verifyPaymentAndUpdateOrder(\n              orders?.orders?.order?.id || orders?.orders.id,\n              razorpay_order_id,\n              razorpay_payment_id,\n              razorpay_signature\n            );\n\n            if (verificationResult.success) {\n              \n              router.push(`/orders/success`);\n            } else {\n              setError('Payment verification failed. Please try again.');\n            }\n          } catch (error) {\n            setError('An unexpected error occurred during verification. Please try again.');\n          }\n        },\n        prefill: {\n          name: selectedAddress.fullName,\n          email: 'customer@example.com',\n          contact: phone,\n        },\n        theme: {\n          color: '#F37254',\n        },\n        modal: {\n          ondismiss: async () => {\n            setError('Payment was cancelled by the user. Please try again.');\n          },\n        },\n      };\n\n      const rzp = new window.Razorpay(options);\n      rzp.open();\n    } catch (err) {\n      setError('Payment process failed. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    const phoneValidationError = validatePhone();\n    setPhoneError(phoneValidationError);\n  }, [phone]);\n\n  return (\n    <div className=\"bg-gray-100\">\n  {error && <div className=\"bg-red-500 text-white p-4 rounded mb-4\">{error}</div>}\n\n  <div className=\"p-6 shadow-md bg-white\">\n    <h1 className=\"text-xl font-semibold border-b pb-4\">{title}</h1>\n\n    {/* Phone Number Section */}\n    <div className=\"mb-6 mt-4\">\n  <label className=\"block text-sm font-semibold text-gray-700 mb-1\">\n    Phone Number\n  </label>\n  <input\n    type=\"text\"\n    value={phone}\n    onChange={(e) => setPhone(e.target.value)}\n    className={`w-full rounded-lg border p-3 text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n      phoneError ? \"border-red-500 ring-red-500\" : \"border-gray-300\"\n    }`}\n    placeholder=\"Enter your 10-digit phone number\"\n  />\n  {phoneError && (\n    <p className=\"text-sm text-red-500 mt-2 italic\">{phoneError}</p>\n  )}\n</div>\n\n\n    {/* Address Section */}\n    <div className=\"mb-4\">\n      <h2 className=\"text-lg font-medium text-gray-700\">Select Delivery Address</h2>\n      <div className=\"mt-2 border rounded p-4\">\n        {addresses.map((address) => (\n          <div\n          key={address.id}\n          className={`flex items-center mb-4 p-4 rounded-lg border-2 ${\n            selectedAddress?.id === address.id\n              ? \"border-blue-500 bg-blue-50\"\n              : \"border-gray-300 bg-white\"\n          } shadow-sm hover:shadow-md transition-shadow duration-200`}\n        >\n          <input\n            type=\"radio\"\n            name=\"address\"\n            checked={selectedAddress?.id === address.id}\n            onChange={() => setSelectedAddress(address)}\n            className=\"mr-4 h-5 w-5 accent-blue-500 cursor-pointer\"\n          />\n          <div className=\"flex flex-col\">\n            <p className=\"text-base text-blue-700 font-semibold\">\n              {address.street}\n            </p>\n            <p className=\"text-sm text-gray-600\">\n              {`${address.city}, ${address.state}, ${address.zip}`}\n            </p>\n          </div>\n        </div>\n        \n        ))}\n      </div>\n\n      <button\n        className=\"text-blue-600 underline mt-2\"\n        onClick={() => setShowForm(!showForm)}\n      >\n        {showForm ? 'Cancel' : '+ Add New Address'}\n      </button>\n\n      {showForm && (\n        <div className=\"mt-4 border rounded p-4 bg-gray-50\">\n          {Object.keys(newAddress).map((key) => (\n            <div key={key} className=\"mb-3\">\n              <label className=\"block text-sm font-medium capitalize text-gray-600\" htmlFor={key}>{key.replace(/([A-Z])/g, ' $1')}</label>\n              <input\n                type=\"text\"\n                id={key}\n                name={key}\n                value={newAddress[key]}\n                onChange={handleInputChange}\n                className={`w-full rounded border p-2 text-sm ${formErrors[key] ? 'border-red-500' : 'border-gray-300'}`}\n                placeholder={`Enter ${key.replace(/([A-Z])/g, ' $1').toLowerCase()}`}\n              />\n              {formErrors[key] && <p className=\"text-sm text-red-500 mt-1\">{formErrors[key]}</p>}\n            </div>\n          ))}\n          <button\n            className=\"bg-gray-800 text-white py-2 px-4 rounded mt-2 hover:bg-gray-700\"\n            onClick={handleAddAddress}\n          >\n            Save Address\n          </button>\n        </div>\n      )}\n    </div>\n\n    {/* Order Summary Section */}\n    <div className={`mt-4 ${!selectedAddress || phoneError ? 'opacity-50 pointer-events-none' : ''}`}>\n      <h2 className=\"text-lg font-medium text-gray-700 mb-4 border-b pb-2\">Order Summary</h2>\n      {orderData?.map((item, index) => (\n        <div key={index} className=\"flex items-center mb-4\">\n          <img\n            className=\"w-20 h-20 object-cover rounded border\"\n            src={item.product?.image || '/_assets/image.png'}\n            alt={item.product?.name}\n          />\n          <div className=\"ml-4\">\n            <h3 className=\"text-sm font-medium text-gray-800\">{item.product?.name}</h3>\n            <p className=\"text-sm text-gray-500\">{item.product?.description}</p>\n            <p className=\"text-sm font-bold text-gray-800\">${item.product?.offerPrice}</p>\n          </div>\n        </div>\n      ))}\n      <div className=\"border-t pt-4\">\n        <p className=\"font-medium text-lg text-gray-800\">Total: ${totalBill}</p>\n      </div>\n    </div>\n\n    {/* Payment Button */}\n    <div className=\"mt-6 text-center\">\n      <button\n        className={`w-full p-3 rounded text-white ${loading ? 'bg-gray-500' : 'bg-gray-600 hover:bg-gray-700'}`}\n        disabled={!selectedAddress || phoneError || loading}\n        onClick={handlePayment}\n      >\n        {loading ? 'Processing...' : 'Proceed to Payment'}\n      </button>\n    </div>\n  </div>\n</div>\n\n  );\n};\n\nexport default OrderSummary;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1114, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1120, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/service/UserCartService.js"],"sourcesContent":["\"use client\";\n\nimport { useSelector } from \"react-redux\";\nimport { axiosInstance } from \"../api/axios\";\n\nfunction UserCartService() {\n  const token = useSelector((state) => state.session.token);\n\n  const cartKey = 'shopflow';\n\n  const getHeaders = () => ({\n    Authorization: `Bearer ${token}`,\n    'Content-Type': 'application/json',\n  });\n\n  this.loadCart = function() {\n    const storedCart = localStorage.getItem(cartKey);\n    return storedCart ? JSON.parse(storedCart) : [];\n  };\n\n  this.saveCart = function(cart) {\n    localStorage.setItem(cartKey, JSON.stringify(cart));\n  };\n\n  this.migrateCart = async function(userId) {\n    const guestCart = this.loadCart();\n    console.log(guestCart,userId);\n    if (guestCart.length > 0) {\n      for (const item of guestCart) {\n        try {\n          const res=await this.addItemToCart(userId, item.id, item.quantity);\n          console.log(\"migrated\",res)\n          \n        } catch (error) {\n          console.error('Error migrating cart item:', error);\n        }\n      }\n      this.clearCart();\n      \n    }\n  };\n\n  this.addItemToCart = async function(userId, productId, quantity = 1) {\n    console.log(userId);\n    console.log(productId);\n    try {\n      const response = await axiosInstance.post(\n        // `/user/cart/addItemToCart?userId=${userId}&productId==${userId}4&quantity=${quantity}`, \n        `/user/cart/addItemToCart`,\n       {},\n        {\n          params:{\n            \n              userId,\n              productId,\n              quantity\n             \n          },\n          headers: getHeaders()\n        }\n      );\n      \n\n        return response.data;\n    \n    \n    } catch (error) {\n      console.log(error)\n      console.error('Error adding item to cart:', error);\n      throw error.response ? error.response.data : new Error('Network or server error');\n    }\n  };\n\n  this.viewCart = async function(userId) {\n    try {\n      const response = await axiosInstance.get('/user/cart/viewCart', {\n        params: { userId },\n        headers: getHeaders(),\n      });\n\n      if (response.status === 200) {\n        return response.data.data || [];\n      } else {\n        throw new Error(response.data.message || 'Failed to retrieve cart');\n      }\n    } catch (error) {\n      console.error('Error viewing cart:', error);\n      throw error.response ? error.response.data : new Error('Network or server error');\n    }\n  };\n\n  this.deleteFromCart = async function(userId, productId) {\n    try {\n      const response = await axiosInstance.delete('/user/cart/deleteFromCart', {\n        params: { userId, productId },\n        headers: getHeaders(),\n      });\n\n      if (response.status === 200) {\n        return response.data;\n      } else {\n        throw new Error(response.data.message || 'Failed to delete item from cart');\n      }\n    } catch (error) {\n      console.error('Error deleting item from cart:', error);\n      throw error.response ? error.response.data : new Error('Network or server error');\n    }\n  };\n\n  this.updateCartCount = async function(userId, productId, operation) {\n    try {\n      const response = await axiosInstance.put('/user/cart/cartCount', {}, {\n        params: { userId, productId, operation },\n        headers: getHeaders(),\n      });\n      console.log(response.status)\n      if (response.status === 200) {\n        return response.data;\n      } else {\n        throw new Error(response.data || 'Failed to update cart count');\n      }\n    } catch (error) {\n      console.error('Error updating cart count:', error);\n      throw error;\n    }\n  };\n\n  this.clearCart = function() {\n    localStorage.removeItem(cartKey);\n  };\n}\n\nexport default UserCartService;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1255, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1261, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/_routeprotector/WithAuth.js"],"sourcesContent":["import { useRouter } from 'next/navigation';\nimport { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nconst withAuth = (WrappedComponent) => {\n  return (props) => {\n    const router = useRouter();\n    const isLoggedIn = useSelector((state) => state.session.user);\n    const [loading, setLoading] = useState(true);  // Add a loading state\n\n    useEffect(() => {\n      if (isLoggedIn !== undefined) {\n        setLoading(false); \n      }\n    }, [isLoggedIn]);\n\n    useEffect(() => {\n      if (!loading && !isLoggedIn) {\n        router.push('/auth'); \n      }\n    }, [loading, isLoggedIn, router]);\n\n    if (loading) {\n      return <div>Loading.......</div>; \n    }\n\n    return isLoggedIn ? <WrappedComponent {...props} /> : null;\n  };\n};\n\nexport default withAuth;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAEA,MAAM,WAAW,CAAC;;IAChB,UAAO,CAAC;;QACN,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;QACvB,MAAM,aAAa,CAAA,GAAA,4JAAA,CAAA,cAAW,AAAD;gDAAE,CAAC,QAAU,MAAM,OAAO,CAAC,IAAI;;QAC5D,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,OAAQ,sBAAsB;QAErE,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;gBACR,IAAI,eAAe,WAAW;oBAC5B,WAAW;gBACb;YACF;iCAAG;YAAC;SAAW;QAEf,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;gBACR,IAAI,CAAC,WAAW,CAAC,YAAY;oBAC3B,OAAO,IAAI,CAAC;gBACd;YACF;iCAAG;YAAC;YAAS;YAAY;SAAO;QAEhC,IAAI,SAAS;YACX,qBAAO,6LAAC;0BAAI;;;;;;QACd;QAEA,OAAO,2BAAa,6LAAC;YAAkB,GAAG,KAAK;;;;;mBAAO;IACxD;;YArBiB,qIAAA,CAAA,YAAS;YACL,4JAAA,CAAA,cAAW;;;AAqBlC;uCAEe"}},
    {"offset": {"line": 1328, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1334, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/checkout/page.js"],"sourcesContent":["\"use client\";\nimport React, { useEffect, useState } from \"react\";\nimport OrderSummary from \"./Checkout\";\nimport UserCartService from \"../service/UserCartService\";\nimport { useSelector } from \"react-redux\";\nimport withAuth from \"../_routeprotector/WithAuth\";\n\nfunction Page() {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [orders, setOrders] = useState([]);\n  const userCartService = new UserCartService();\n\n  const reduxOrders = useSelector((state) => state?.utils?.product?.orders);\n  const userId = useSelector((state) => state.session.user?.id);\n\n  const fetchProducts = async () => {\n    if (!userId) return;\n    try {\n      const response = await userCartService.viewCart(userId);\n      console.log(response);\n      setProducts(response);\n    } catch (error) {\n      console.error(\"Error fetching products:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (reduxOrders) {\n      localStorage.setItem(\"orders\", JSON.stringify(reduxOrders));\n      setOrders(reduxOrders);\n    } else {\n      const storedOrders = localStorage.getItem(\"orders\");\n      if (storedOrders) {\n        setOrders(JSON.parse(storedOrders));\n      }\n    }\n  }, [reduxOrders]);\n\n  useEffect(() => {\n    if (userId) {\n      fetchProducts();\n    }\n  }, [userId]);\n\n  if (loading) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <OrderSummary\n      data={products.items || []}\n      userId={userId}\n      orders={orders}\n      totalBill={products.totalAmount || 0}\n    />\n  );\n}\n\nexport default withAuth(Page);\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAEA;AADA;;;AAJA;;;;;;AAOA,SAAS;;IACP,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IACvC,MAAM,kBAAkB,IAAI,2IAAA,CAAA,UAAe;IAE3C,MAAM,cAAc,CAAA,GAAA,4JAAA,CAAA,cAAW,AAAD;yCAAE,CAAC,QAAU,OAAO,OAAO,SAAS;;IAClE,MAAM,SAAS,CAAA,GAAA,4JAAA,CAAA,cAAW,AAAD;oCAAE,CAAC,QAAU,MAAM,OAAO,CAAC,IAAI,EAAE;;IAE1D,MAAM,gBAAgB;QACpB,IAAI,CAAC,QAAQ;QACb,IAAI;YACF,MAAM,WAAW,MAAM,gBAAgB,QAAQ,CAAC;YAChD,QAAQ,GAAG,CAAC;YACZ,YAAY;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;QAC5C,SAAU;YACR,WAAW;QACb;IACF;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0BAAE;YACR,IAAI,aAAa;gBACf,aAAa,OAAO,CAAC,UAAU,KAAK,SAAS,CAAC;gBAC9C,UAAU;YACZ,OAAO;gBACL,MAAM,eAAe,aAAa,OAAO,CAAC;gBAC1C,IAAI,cAAc;oBAChB,UAAU,KAAK,KAAK,CAAC;gBACvB;YACF;QACF;yBAAG;QAAC;KAAY;IAEhB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0BAAE;YACR,IAAI,QAAQ;gBACV;YACF;QACF;yBAAG;QAAC;KAAO;IAEX,IAAI,SAAS;QACX,qBAAO,6LAAC;sBAAI;;;;;;IACd;IAEA,qBACE,6LAAC,qIAAA,CAAA,UAAY;QACX,MAAM,SAAS,KAAK,IAAI,EAAE;QAC1B,QAAQ;QACR,QAAQ;QACR,WAAW,SAAS,WAAW,IAAI;;;;;;AAGzC;GApDS;;QAMa,4JAAA,CAAA,cAAW;QAChB,4JAAA,CAAA,cAAW;;;KAPnB;6CAsDM,CAAA,GAAA,4IAAA,CAAA,UAAQ,AAAD,EAAE"}},
    {"offset": {"line": 1433, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}