{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/service/WishListService.js"],"sourcesContent":["import { axiosInstance as axios } from '../api/axios'; \n\nexport async function loadWishlist(userId, token) {\n  try {\n    const response = await axios.get('/user/wishlist/viewWishlist', {\n      params: { userId },\n      headers: {\n        Authorization: `Bearer ${token}`,\n        \n    'Content-Type': 'application/json',\n      },\n    });\n    return response.data.data.products || [];\n  } catch (error) {\n    console.error('Error loading wishlist:', error);\n    return [];\n  }\n}\n\n\nexport async function addOrRemoveProductFromWishlist(userId, productId, token) {\n  try {\n    const response = await axios.post(\n      '/user/wishlist/addOrRemoveItem',\n      {},\n      {\n        params: { userId, productId: productId },\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n      }\n    );\n    return response; \n  } catch (error) {\n    console.error('Error adding or removing product to wishlist:', error);\n    throw error;\n  }\n}\n\n\n\n\nexport async function getWishlist(userId, token) {\n  return await loadWishlist(userId, token);\n}\n\nexport async function clearWishlist(userId, token) {\n  try {\n    const wishlist = await loadWishlist(userId, token);\n    for (const product of wishlist) {\n      await removeProductFromWishlist(userId, product.productId, token);\n    }\n  } catch (error) {\n    console.error('Error clearing wishlist:', error);\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEO,eAAe,aAAa,MAAM,EAAE,KAAK;IAC9C,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAK,CAAC,GAAG,CAAC,+BAA+B;YAC9D,QAAQ;gBAAE;YAAO;YACjB,SAAS;gBACP,eAAe,CAAC,OAAO,EAAE,OAAO;gBAEpC,gBAAgB;YACd;QACF;QACA,OAAO,SAAS,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,EAAE;IAC1C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,EAAE;IACX;AACF;AAGO,eAAe,+BAA+B,MAAM,EAAE,SAAS,EAAE,KAAK;IAC3E,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAK,CAAC,IAAI,CAC/B,kCACA,CAAC,GACD;YACE,QAAQ;gBAAE;gBAAQ,WAAW;YAAU;YACvC,SAAS;gBACP,eAAe,CAAC,OAAO,EAAE,OAAO;gBAChC,gBAAgB;YAClB;QACF;QAEF,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iDAAiD;QAC/D,MAAM;IACR;AACF;AAKO,eAAe,YAAY,MAAM,EAAE,KAAK;IAC7C,OAAO,MAAM,aAAa,QAAQ;AACpC;AAEO,eAAe,cAAc,MAAM,EAAE,KAAK;IAC/C,IAAI;QACF,MAAM,WAAW,MAAM,aAAa,QAAQ;QAC5C,KAAK,MAAM,WAAW,SAAU;YAC9B,MAAM,0BAA0B,QAAQ,QAAQ,SAAS,EAAE;QAC7D;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;IAC5C;AACF"}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/_routeprotector/WithAuth.js"],"sourcesContent":["import { useRouter } from 'next/navigation';\nimport { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nconst withAuth = (WrappedComponent) => {\n  return (props) => {\n    const router = useRouter();\n    const isLoggedIn = useSelector((state) => state.session.user);\n    const [loading, setLoading] = useState(true);  // Add a loading state\n\n    useEffect(() => {\n      if (isLoggedIn !== undefined) {\n        setLoading(false); \n      }\n    }, [isLoggedIn]);\n\n    useEffect(() => {\n      if (!loading && !isLoggedIn) {\n        router.push('/auth'); \n      }\n    }, [loading, isLoggedIn, router]);\n\n    if (loading) {\n      return <div>Loading.......</div>; \n    }\n\n    return isLoggedIn ? <WrappedComponent {...props} /> : null;\n  };\n};\n\nexport default withAuth;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAEA,MAAM,WAAW,CAAC;;IAChB,UAAO,CAAC;;QACN,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;QACvB,MAAM,aAAa,CAAA,GAAA,4JAAA,CAAA,cAAW,AAAD;gDAAE,CAAC,QAAU,MAAM,OAAO,CAAC,IAAI;;QAC5D,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,OAAQ,sBAAsB;QAErE,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;gBACR,IAAI,eAAe,WAAW;oBAC5B,WAAW;gBACb;YACF;iCAAG;YAAC;SAAW;QAEf,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;gBACR,IAAI,CAAC,WAAW,CAAC,YAAY;oBAC3B,OAAO,IAAI,CAAC;gBACd;YACF;iCAAG;YAAC;YAAS;YAAY;SAAO;QAEhC,IAAI,SAAS;YACX,qBAAO,6LAAC;0BAAI;;;;;;QACd;QAEA,OAAO,2BAAa,6LAAC;YAAkB,GAAG,KAAK;;;;;mBAAO;IACxD;;YArBiB,qIAAA,CAAA,YAAS;YACL,4JAAA,CAAA,cAAW;;;AAqBlC;uCAEe"}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/wishlist/page.js"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useEffect,useState } from 'react';\nimport { loadWishlist, removeProductFromWishlist } from '../service/WishListService';\nimport { useSelector } from 'react-redux';\nimport WithAuth from '../_routeprotector/WithAuth';\nimport { addOrRemoveProductFromWishlist } from '../service/WishListService';\nconst Wishlist = () => {\n  const [products, setProducts] = useState([]);\n  \n  const [error, setError] = useState(null);\n  const userId = useSelector((state) => state.session.user?.id);\n  const token = useSelector((state) => state.session.token);    \n\n  \n\n  useEffect(() => {\n    const fetchWishlist = async () => {\n      try {\n        if (userId) {\n          const wishlistProducts = await loadWishlist(userId, token);\n          console.log(\"wishlist:\",wishlistProducts);\n\n          setProducts(wishlistProducts);\n        }\n      } catch (err) {\n        setError('Failed to load wishlist. Please try again later.');\n      }\n    };\n\n    fetchWishlist();\n  }, [userId, token]);\n\n  const handleRemoveProduct = async (productId) => {\n    console.log(products);\n    try {\n      if (userId) {\n        setProducts((prevProducts) => prevProducts.filter((product) => product.productId !== productId));\n        await addOrRemoveProductFromWishlist(userId, productId, token);\n      }\n    } catch (err) {\n      setError('Failed to remove product from wishlist. Please try again later.');\n      console.log(err)\n    }\n  };\n\n  return (\n    <section className=\"h-1/3 bg-gray-100 py-12 sm:py-16 lg:py-20\">\n      <div className=\"mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex items-center justify-center\">\n          {\n            (products.length > 0) ?\n            <h1 className=\"text-2xl font-semibold text-gray-900\">Your Wishlist</h1> :\n            <h1 className=\"text-2xl font-semibold text-gray-900\">Your Wishlist is empty</h1>\n          }\n        </div>\n\n        {error && (\n          <div className=\"text-center text-red-500 mt-4\">\n            {error}\n          </div>\n        )}\n\n        <div className=\"mx-auto mt-8 max-w-2xl md:mt-12\">\n          <div className=\"bg-white shadow\">\n            <div className=\"px-4 py-6 sm:px-8 sm:py-10\">\n              <div className=\"flow-root\">\n                <ul className=\"-my-8\">\n                  {products.map((product, index) => (\n                    <WishlistTile\n                      key={index}\n                      product={product.product}\n                      onRemoveProduct={handleRemoveProduct}\n                    />\n                  ))}\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default WithAuth(Wishlist);\n\nfunction WishlistTile({ product, onRemoveProduct }) {\n  return (\n    <li className=\"flex flex-col space-y-3 py-6 text-left sm:flex-row sm:space-x-5 sm:space-y-0\">\n      <div className=\"shrink-0\">\n        <img className=\"h-24 w-24 max-w-full rounded-lg object-cover\" src={product.image||\"/_assets/image.png\"} alt={product.name} />\n      </div>\n\n      <div className=\"relative flex flex-1 flex-col justify-between\">\n        <div className=\"sm:col-gap-5 sm:grid sm:grid-cols-2\">\n          <div className=\"pr-8 sm:pr-5\">\n            <p className=\"text-base font-semibold text-gray-900\">{product.name}</p>\n            <p className=\"text-sm text-gray-500\">Brand: {product.brand}</p>\n            <p className=\"text-sm text-gray-500\">{product.description}</p>\n            <div className=\"flex items-center space-x-2\">\n              <p className=\"text-sm text-gray-500 line-through\">${product.actualPrice}</p>\n              <p className=\"text-sm text-orange-500\">${product.offerPrice}</p>\n              <p className=\"text-sm text-green-500\">({product.discountPercentage}% off)</p>\n            </div>\n            <p className=\"text-sm text-gray-500\">Rating: {product.rating} / 5</p>\n          </div>\n        </div>\n\n        <div className=\"absolute top-0 right-0 flex sm:bottom-0 sm:top-auto\">\n          <button\n            onClick={() => onRemoveProduct(product.id)}\n            type=\"button\"\n            className=\"flex rounded p-2 text-center text-gray-500 transition-all duration-200 ease-in-out focus:shadow hover:text-gray-900\"\n          >\n            <svg\n              className=\"h-5 w-5\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n      </div>\n    </li>\n  );\n}\n\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 482, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}