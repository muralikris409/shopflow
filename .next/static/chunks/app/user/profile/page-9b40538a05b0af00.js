(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[614],{6698:(e,s,r)=>{Promise.resolve().then(r.bind(r,1337))},5743:(e,s,r)=>{"use strict";r.d(s,{A:()=>n});var t=r(5155),a=r(6046),o=r(2115),l=r(3391);let n=e=>s=>{let r=(0,a.useRouter)(),n=(0,l.d4)(e=>e.session.user),[i,d]=(0,o.useState)(!0);return((0,o.useEffect)(()=>{void 0!==n&&d(!1)},[n]),(0,o.useEffect)(()=>{i||n||r.push("/auth")},[i,n,r]),i)?(0,t.jsx)("div",{children:"Loading......."}):n?(0,t.jsx)(e,{...s}):null}},6301:(e,s,r)=>{"use strict";r.d(s,{S:()=>t});let t=r(2651).A.create({baseURL:"https://shopflow-1-ugli.onrender.com"})},1086:(e,s,r)=>{"use strict";r.d(s,{Ad:()=>u,BD:()=>n,E1:()=>h,Hh:()=>l,RW:()=>c,d6:()=>o,iD:()=>a,qk:()=>d,xw:()=>i});var t=r(6301);async function a(e){let{email:s,password:r}=e;try{let{token:e,data:a}=(await t.S.post("user/login",{email:s,password:r})).data;return localStorage.setItem("shopflow_session",JSON.stringify({user:a,token:e})),{data:a,token:e}}catch(e){throw Error(e.response.data.message||"An error occurred during login.")}}async function o(e){try{let s=await t.S.post("user/oauth",{name:e.name,email:e.email,image:e.image,id:e.id}),{token:r,data:a}=s.data;return localStorage.setItem("shopflow_session",JSON.stringify({user:a,token:r})),s.data}catch(e){throw Error(e.response.data.message||"An error occurred during Google OAuth.")}}async function l(e){let{username:s,email:r,password:a}=e;try{return(await t.S.post("user/signup",{name:s,email:r,password:a},{headers:{"Content-Type":"application/json"}})).data}catch(e){throw Error(e.response.data.message||"An error occurred during sign-up.")}}async function n(e){try{var s;let r=await t.S.post("user/forgotPassword?email=".concat(e));if(console.log(r),200===r.status)return{ok:!0,data:r.data};return{ok:!1,message:(null===(s=r.data)||void 0===s?void 0:s.message)||"Something went wrong."}}catch(e){throw console.log(e),e}}async function i(e,s){try{return await t.S.post("user/resetPassword?token=".concat(e,"&newPassword=").concat(s))}catch(e){console.log(e)}}async function d(e,s){try{console.log("test");let r=await t.S.post("user/userProfileInfo?userId=".concat(s),{},{headers:{Authorization:"Bearer ".concat(e)}});return console.log(r),r}catch(e){console.log(e)}}async function c(e,s,r){try{console.log("test");let a=await t.S.post("user/updateUserProfile?userId=".concat(s),r,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"}});return console.log(a),a}catch(e){console.log(e)}}async function u(e,s){try{console.log("token",e);let r=await t.S.post("user/getAllAddress?userId=".concat(s),{},{headers:{Authorization:"Bearer ".concat(e)}});return console.log(r),r.data}catch(e){return console.error("Error fetching addresses:",e),{error:e.message||"Something went wrong!"}}}let h=async(e,s,r)=>{try{let{street:a,city:o,state:l,country:n,zip:i,isPrimary:d}=r;return(await t.S.post("user/addAddress",{},{params:{userId:s,street:a,city:o,state:l,country:n,zip:i,isPrimary:d},headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){var a,o;return console.error("Error adding address:",e),{error:(null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)||"Something went wrong!"}}}},1337:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>d});var t=r(5155),a=r(1086),o=r(8173),l=r.n(o),n=r(2115),i=r(3391);let d=(0,r(5743).A)(()=>{var e;let[s,r]=(0,n.useState)({name:"",email:"",phone:"",profileImage:""}),[o,d]=(0,n.useState)(!0),[c,u]=(0,n.useState)(null),h=(0,i.d4)(e=>{var s,r;return null==e?void 0:null===(r=e.session)||void 0===r?void 0:null===(s=r.user)||void 0===s?void 0:s.id}),g=(0,i.d4)(e=>{var s;return null==e?void 0:null===(s=e.session)||void 0===s?void 0:s.token});return((0,n.useEffect)(()=>{let e=async()=>{try{d(!0),u(null);let e=await (0,a.qk)(g,h);r(e.data.data)}catch(e){u("Failed to load profile data."),console.error(e)}finally{d(!1)}};h&&g&&e()},[h,g]),o)?(0,t.jsx)("div",{className:"text-center",children:"Loading..."}):c?(0,t.jsx)("div",{className:"text-center text-red-500",children:c}):(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-md m-10",children:[(0,t.jsxs)("div",{className:"flex items-center mb-6",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center",children:s.profile_pic?(0,t.jsx)("img",{src:null==s?void 0:s.profile_pic,alt:"Profile",className:"w-full h-full object-cover"}):(0,t.jsx)("span",{className:"text-3xl font-bold text-gray-500",children:null==s?void 0:null===(e=s.name)||void 0===e?void 0:e.charAt(0)})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:null==s?void 0:s.name}),(0,t.jsx)("p",{className:"text-gray-600",children:null==s?void 0:s.email}),(0,t.jsx)("p",{className:"text-gray-600",children:null==s?void 0:s.phone})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg shadow",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Orders"}),(0,t.jsx)("p",{className:"text-gray-600",children:"View your past orders"}),(0,t.jsx)(l(),{href:"/orders",className:"mt-2 text-blue-500 hover:underline",children:"View Orders"})]}),(0,t.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg shadow",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Wishlist"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Check your saved items"}),(0,t.jsx)(l(),{href:"/wishlist",className:"mt-2 text-blue-500 hover:underline",children:"View Wishlist"})]}),(0,t.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg shadow col-span-2",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Edit Profile"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Update your information"}),(0,t.jsx)(l(),{href:"/user/profile/manage",className:"mt-2 text-blue-500 hover:underline",children:"Edit Profile"})]})]})]})})}},e=>{var s=s=>e(e.s=s);e.O(0,[651,391,28,441,517,358],()=>s(6698)),_N_E=e.O()}]);