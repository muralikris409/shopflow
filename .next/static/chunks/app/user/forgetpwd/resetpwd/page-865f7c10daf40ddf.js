(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[250],{3184:(e,r,t)=>{Promise.resolve().then(t.bind(t,7243))},6046:(e,r,t)=>{"use strict";var s=t(6658);t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},6301:(e,r,t)=>{"use strict";t.d(r,{S:()=>s});let s=t(2651).A.create({baseURL:"https://shopflow-1-ugli.onrender.com"})},1086:(e,r,t)=>{"use strict";t.d(r,{Ad:()=>i,BD:()=>c,E1:()=>g,Hh:()=>n,RW:()=>u,d6:()=>o,iD:()=>a,qk:()=>d,xw:()=>l});var s=t(6301);async function a(e){let{email:r,password:t}=e;try{let{token:e,data:a}=(await s.S.post("user/login",{email:r,password:t})).data;return localStorage.setItem("shopflow_session",JSON.stringify({user:a,token:e})),{data:a,token:e}}catch(e){throw Error(e.response.data.message||"An error occurred during login.")}}async function o(e){try{let r=await s.S.post("user/oauth",{name:e.name,email:e.email,image:e.image,id:e.id}),{token:t,data:a}=r.data;return localStorage.setItem("shopflow_session",JSON.stringify({user:a,token:t})),r.data}catch(e){throw Error(e.response.data.message||"An error occurred during Google OAuth.")}}async function n(e){let{username:r,email:t,password:a}=e;try{return(await s.S.post("user/signup",{name:r,email:t,password:a},{headers:{"Content-Type":"application/json"}})).data}catch(e){throw Error(e.response.data.message||"An error occurred during sign-up.")}}async function c(e){try{var r;let t=await s.S.post("user/forgotPassword?email=".concat(e));if(console.log(t),200===t.status)return{ok:!0,data:t.data};return{ok:!1,message:(null===(r=t.data)||void 0===r?void 0:r.message)||"Something went wrong."}}catch(e){throw console.log(e),e}}async function l(e,r){try{return await s.S.post("user/resetPassword?token=".concat(e,"&newPassword=").concat(r))}catch(e){console.log(e)}}async function d(e,r){try{console.log("test");let t=await s.S.post("user/userProfileInfo?userId=".concat(r),{},{headers:{Authorization:"Bearer ".concat(e)}});return console.log(t),t}catch(e){console.log(e)}}async function u(e,r,t){try{console.log("test");let a=await s.S.post("user/updateUserProfile?userId=".concat(r),t,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"}});return console.log(a),a}catch(e){console.log(e)}}async function i(e,r){try{console.log("token",e);let t=await s.S.post("user/getAllAddress?userId=".concat(r),{},{headers:{Authorization:"Bearer ".concat(e)}});return console.log(t),t.data}catch(e){return console.error("Error fetching addresses:",e),{error:e.message||"Something went wrong!"}}}let g=async(e,r,t)=>{try{let{street:a,city:o,state:n,country:c,zip:l,isPrimary:d}=t;return(await s.S.post("user/addAddress",{},{params:{userId:r,street:a,city:o,state:n,country:c,zip:l,isPrimary:d},headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){var a,o;return console.error("Error adding address:",e),{error:(null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)||"Something went wrong!"}}}},7243:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var s=t(5155),a=t(1086),o=t(6046),n=t(2115);let c=()=>(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading..."}),children:(0,s.jsx)(l,{})}),l=()=>{let[e,r]=(0,n.useState)(""),[t,c]=(0,n.useState)(""),[l,d]=(0,n.useState)(""),[u,i]=(0,n.useState)(""),g=(0,o.useSearchParams)().get("token"),h=async()=>{if(e&&t){if(e.length<8)d("Password must be at least 8 characters long."),i("");else if(e!==t)d("Passwords do not match."),i("");else{d("");try{let r=await (0,a.xw)(g,e);200===r.status?(i("Your password has been reset successfully!"),d("")):(d(r.message||"An error occurred while resetting the password."),i(""))}catch(e){d("Failed to reset password. Please try again later."),i("")}}}else d("All fields are required."),i("")};return(0,s.jsxs)("div",{className:"w-full max-w-md mx-auto p-8 bg-white rounded-lg shadow-lg m-10",children:[(0,s.jsx)("h2",{className:"text-3xl font-semibold text-gray-800 text-center",children:"Reset Password"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 text-center mt-2",children:"Please enter your new password below."}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)("input",{type:"password",className:"w-full px-4 py-3 border ".concat(l?"border-red-500":"border-gray-300"," rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200"),placeholder:"New Password",value:e,onChange:e=>r(e.target.value)})}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("input",{type:"password",className:"w-full px-4 py-3 border ".concat(l?"border-red-500":"border-gray-300"," rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200"),placeholder:"Confirm Password",value:t,onChange:e=>c(e.target.value)})}),l&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-2",children:l}),u&&(0,s.jsx)("p",{className:"text-green-500 text-sm mt-2",children:u}),(0,s.jsx)("button",{onClick:h,className:"w-full mt-6 bg-orange-500 text-white py-3 rounded-lg hover:bg-blue-600 transition-colors duration-200 shadow-md",children:"Reset Password"})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[651,441,517,358],()=>r(3184)),_N_E=e.O()}]);