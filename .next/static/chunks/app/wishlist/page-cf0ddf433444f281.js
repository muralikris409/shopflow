(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720],{34:(e,s,t)=>{Promise.resolve().then(t.bind(t,9467))},6046:(e,s,t)=>{"use strict";var a=t(6658);t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},5743:(e,s,t)=>{"use strict";t.d(s,{A:()=>c});var a=t(5155),r=t(6046),l=t(2115),i=t(3391);let c=e=>s=>{let t=(0,r.useRouter)(),c=(0,i.d4)(e=>e.session.user),[n,o]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{void 0!==c&&o(!1)},[c]),(0,l.useEffect)(()=>{n||c||t.push("/auth")},[n,c,t]),n)?(0,a.jsx)("div",{children:"Loading......."}):c?(0,a.jsx)(e,{...s}):null}},6301:(e,s,t)=>{"use strict";t.d(s,{S:()=>a});let a=t(2651).A.create({baseURL:"http://192.168.0.114:5000"})},1342:(e,s,t)=>{"use strict";t.d(s,{UI:()=>r,lx:()=>l});var a=t(6301);async function r(e,s){try{return(await a.S.get("/user/wishlist/viewWishlist",{params:{userId:e},headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}})).data.data.products||[]}catch(e){return console.error("Error loading wishlist:",e),[]}}async function l(e,s,t){try{return await a.S.post("/user/wishlist/addOrRemoveItem",{},{params:{userId:e,productId:s},headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})}catch(e){throw console.error("Error adding or removing product to wishlist:",e),e}}},9467:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var a=t(5155),r=t(2115),l=t(1342),i=t(3391);let c=(0,t(5743).A)(()=>{let[e,s]=(0,r.useState)([]),[t,c]=(0,r.useState)(null),o=(0,i.d4)(e=>{var s;return null===(s=e.session.user)||void 0===s?void 0:s.id}),d=(0,i.d4)(e=>e.session.token);(0,r.useEffect)(()=>{(async()=>{try{if(o){let e=await (0,l.UI)(o,d);console.log("wishlist:",e),s(e)}}catch(e){c("Failed to load wishlist. Please try again later.")}})()},[o,d]);let x=async t=>{console.log(e);try{o&&(s(e=>e.filter(e=>e.productId!==t)),await (0,l.lx)(o,t,d))}catch(e){c("Failed to remove product from wishlist. Please try again later."),console.log(e)}};return(0,a.jsx)("section",{className:"h-1/3 bg-gray-100 py-12 sm:py-16 lg:py-20",children:(0,a.jsxs)("div",{className:"mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:e.length>0?(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Your Wishlist"}):(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Your Wishlist is empty"})}),t&&(0,a.jsx)("div",{className:"text-center text-red-500 mt-4",children:t}),(0,a.jsx)("div",{className:"mx-auto mt-8 max-w-2xl md:mt-12",children:(0,a.jsx)("div",{className:"bg-white shadow",children:(0,a.jsx)("div",{className:"px-4 py-6 sm:px-8 sm:py-10",children:(0,a.jsx)("div",{className:"flow-root",children:(0,a.jsx)("ul",{className:"-my-8",children:e.map((e,s)=>(0,a.jsx)(n,{product:e.product,onRemoveProduct:x},s))})})})})})]})})});function n(e){let{product:s,onRemoveProduct:t}=e;return(0,a.jsxs)("li",{className:"flex flex-col space-y-3 py-6 text-left sm:flex-row sm:space-x-5 sm:space-y-0",children:[(0,a.jsx)("div",{className:"shrink-0",children:(0,a.jsx)("img",{className:"h-24 w-24 max-w-full rounded-lg object-cover",src:s.image||"/_assets/image.png",alt:s.name})}),(0,a.jsxs)("div",{className:"relative flex flex-1 flex-col justify-between",children:[(0,a.jsx)("div",{className:"sm:col-gap-5 sm:grid sm:grid-cols-2",children:(0,a.jsxs)("div",{className:"pr-8 sm:pr-5",children:[(0,a.jsx)("p",{className:"text-base font-semibold text-gray-900",children:s.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Brand: ",s.brand]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:s.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500 line-through",children:["$",s.actualPrice]}),(0,a.jsxs)("p",{className:"text-sm text-orange-500",children:["$",s.offerPrice]}),(0,a.jsxs)("p",{className:"text-sm text-green-500",children:["(",s.discountPercentage,"% off)"]})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Rating: ",s.rating," / 5"]})]})}),(0,a.jsx)("div",{className:"absolute top-0 right-0 flex sm:bottom-0 sm:top-auto",children:(0,a.jsx)("button",{onClick:()=>t(s.id),type:"button",className:"flex rounded p-2 text-center text-gray-500 transition-all duration-200 ease-in-out focus:shadow hover:text-gray-900",children:(0,a.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[651,391,441,517,358],()=>s(34)),_N_E=e.O()}]);