(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{9459:(t,e,s)=>{Promise.resolve().then(s.bind(s,7725))},6301:(t,e,s)=>{"use strict";s.d(e,{S:()=>r});let r=s(2651).A.create({baseURL:"http://localhost:5000"})},7725:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>c});var r=s(5155),a=s(2115),i=s(9689),n=s(5408);let l=t=>{let{isLoggedIn:e,userId:s}=t,[l,c]=(0,a.useState)([]),d=(0,a.useMemo)(()=>new n.A,[]);(0,a.useEffect)(()=>{(async()=>{e?c(await d.viewCart(s)):c((0,i.Xl)())})()},[e,s,d]);let m=async t=>{e?(await d.updateCartCount(s,t,"increase"),c(await d.viewCart(s))):((0,i.o7)(t),c((0,i.Xl)()))},u=async t=>{e?(await d.updateCartCount(s,t,"decrease"),c(await d.viewCart(s))):((0,i.CG)(t),c((0,i.Xl)()))},x=async t=>{e?(await d.deleteFromCart(s,t),c(await d.viewCart(s))):((0,i.qY)(t),c((0,i.Xl)()))};return(0,r.jsx)("section",{className:"h-1/3 bg-gray-100 py-12 sm:py-16 lg:py-20",children:(0,r.jsxs)("div",{className:"mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Your Cart"})}),(0,r.jsx)("div",{className:"mx-auto mt-8 max-w-2xl md:mt-12",children:(0,r.jsx)("div",{className:"bg-white shadow",children:(0,r.jsxs)("div",{className:"px-4 py-6 sm:px-8 sm:py-10",children:[(0,r.jsx)("div",{className:"flow-root",children:(0,r.jsx)("ul",{className:"-my-8",children:l.map((t,e)=>(0,r.jsx)(o,{product:t,index:e,onIncreaseQuantity:m,onDecreaseQuantity:u,onRemoveProduct:x},e))})}),(0,r.jsxs)("div",{className:"mt-6 border-t border-gray-200 pt-6",children:[(0,r.jsxs)("div",{className:"flex justify-between text-base font-medium text-gray-900",children:[(0,r.jsx)("p",{children:"Total"}),(0,r.jsxs)("p",{children:["$",l.reduce((t,e)=>t+e.offerPrice*e.quantity,0).toFixed(2)]})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)("button",{type:"button",className:"group inline-flex w-full items-center justify-center rounded-md bg-gray-900 px-6 py-4 text-lg font-semibold text-white transition-all duration-200 ease-in-out focus:shadow hover:bg-gray-800",children:["Checkout",(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"group-hover:ml-8 ml-4 h-6 w-6 transition-all",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})]})})})]})})};function o(t){let{product:e,index:s,onIncreaseQuantity:a,onDecreaseQuantity:i,onRemoveProduct:n}=t;return(0,r.jsxs)("li",{className:"flex flex-col space-y-3 py-6 text-left sm:flex-row sm:space-x-5 sm:space-y-0",children:[(0,r.jsx)("div",{className:"shrink-0",children:(0,r.jsx)("img",{className:"h-24 w-24 max-w-full rounded-lg object-cover",src:e.image,alt:e.name})}),(0,r.jsxs)("div",{className:"relative flex flex-1 flex-col justify-between",children:[(0,r.jsxs)("div",{className:"sm:col-gap-5 sm:grid sm:grid-cols-2",children:[(0,r.jsxs)("div",{className:"pr-8 sm:pr-5",children:[(0,r.jsx)("p",{className:"text-base font-semibold text-gray-900",children:e.name}),(0,r.jsxs)("p",{className:"mx-0 mt-1 mb-0 text-sm text-gray-400",children:["Quantity: ",e.quantity]})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-end justify-between sm:mt-0 sm:items-start sm:justify-end",children:[(0,r.jsxs)("p",{className:"shrink-0 w-20 text-base font-semibold text-gray-900 sm:order-2 sm:ml-8 sm:text-right",children:["$",e.offerPrice.toFixed(2)]}),(0,r.jsx)("div",{className:"sm:order-1",children:(0,r.jsxs)("div",{className:"mx-auto flex h-8 items-stretch text-gray-600",children:[(0,r.jsx)("button",{onClick:()=>i(e.id),className:"flex items-center justify-center rounded-l-md bg-gray-200 px-4 transition hover:bg-black hover:text-white",children:"-"}),(0,r.jsx)("div",{className:"flex w-full items-center justify-center bg-gray-100 px-4 text-xs uppercase transition",children:e.quantity}),(0,r.jsx)("button",{onClick:()=>a(e.id),className:"flex items-center justify-center rounded-r-md bg-gray-200 px-4 transition hover:bg-black hover:text-white",children:"+"})]})})]})]}),(0,r.jsx)("div",{className:"absolute top-0 right-0 flex sm:bottom-0 sm:top-auto",children:(0,r.jsx)("button",{onClick:()=>n(e.id),type:"button",className:"flex rounded p-2 text-center text-gray-500 transition-all duration-200 ease-in-out focus:shadow hover:text-gray-900",children:(0,r.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})})]})]},s)}function c(){return(0,r.jsx)("div",{children:(0,r.jsx)(l,{})})}},9689:(t,e,s)=>{"use strict";s.d(e,{Bj:()=>l,CG:()=>d,Xl:()=>m,o7:()=>c,qY:()=>o});let r="shopflow";function a(){let t=localStorage.getItem(r);return t?JSON.parse(t):[]}function i(t){localStorage.setItem(r,JSON.stringify(t))}function n(t,e){return t.findIndex(t=>t.id===e)}function l(t){let e=a(),s=n(e,t.id);-1===s?e.push({...t,quantity:1}):e[s].quantity+=1,i(e)}function o(t){let e=a();i(e=e.filter(e=>e.id!==t))}function c(t){let e=a(),s=n(e,t);-1!==s&&(e[s].quantity+=1,i(e))}function d(t){let e=a(),s=n(e,t);-1!==s&&(e[s].quantity>1?e[s].quantity-=1:o(t),i(e))}function m(){return a()}},5408:(t,e,s)=>{"use strict";s.d(e,{A:()=>a});var r=s(6301);let a=function(){let t="shopflow";this.loadCart=function(){let e=localStorage.getItem(t);return e?JSON.parse(e):[]},this.saveCart=function(e){localStorage.setItem(t,JSON.stringify(e))},this.migrateCart=async function(t){let e=this.loadCart();if(e.length>0){for(let s of e)await this.addItemToCart(t,s.id,s.quantity);this.clearCart()}},this.addItemToCart=async function(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;try{await r.S.post("/user/cart/addItemToCart",null,{params:{userId:t,productId:e,quantity:s}})}catch(t){console.error("Error adding item to cart:",t)}},this.viewCart=async function(t){try{return(await r.S.get("/user/cart/viewCart",{params:{userId:t}})).data}catch(t){return console.error("Error viewing cart:",t),[]}},this.deleteFromCart=async function(t,e){try{await r.S.post("/user/cart/deleteFromCart",null,{params:{userId:t,productId:e}})}catch(t){console.error("Error deleting item from cart:",t)}},this.updateCartCount=async function(t,e,s){try{await r.S.post("/user/cart/cartCount",null,{params:{userId:t,productId:e,operation:s}})}catch(t){console.error("Error updating cart count:",t)}},this.clearCart=function(){localStorage.removeItem(t)}}}},t=>{var e=e=>t(t.s=e);t.O(0,[651,441,517,358],()=>e(9459)),_N_E=t.O()}]);