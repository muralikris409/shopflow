{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/service/OrderService.js"],"sourcesContent":["import {axiosInstance} from '../api/axios';\n\nexport const createOrder = async (userId, items) => {\n  try {\n    const response = await axiosInstance.post('/user/order/createOrder', { userId, items });\n    return response.data;\n  } catch (error) {\n    console.error('Error creating order:', error);\n    throw new Error(error?.response?.data?.message || 'Error creating order.');\n  }\n};\n\nexport const verifyPaymentAndUpdateOrder = async (orderId,razorpayId, paymentId, paymentSignature) => {\n    console.log(\"order_id:\",orderId);\n    console.log(\"razorpayId:\",razorpayId);\n    console.log(\"paymentId:\",paymentId);\n    console.log(\"siign:\",paymentSignature);\n  try {\n    const response = await axiosInstance.post('/user/order/verify', {}\n    ,\n    {\n        params:{\n            orderId,\n            razorpayId,\n            paymentId,\n            paymentSignature,\n        }\n    }\n    \n);\n    return response.data;\n  } catch (error) {\n    console.error('Error verifying payment:', error);\n    throw new Error(error?.response?.data?.message || 'Error verifying payment.');\n  }\n};\n\nexport const checkOutOrder = async (orderId) => {\n    console.log(\"orderid:\",orderId)\n  try { \n    const response = await axiosInstance.post(`/user/order/checkoutOrder?orderId=${orderId}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching user orders:', error);\n    throw new Error(error?.response?.data?.message || 'Error fetching user orders.');\n  }\n};\nexport const getOrderByUserId = async (userId) => {\n    console.log(\"userId:\", userId);\n    try {\n      const response = await axiosInstance.get(`/user/order/getUserOrder?userId=${userId}`\n       \n      );\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching user orders:', error);\n      throw new Error(error?.response?.data?.message || 'Error fetching user orders.');\n    }\n  };\nexport const cancelOrder = async (orderId) => {\n    console.log(orderId);\n  try {\n    const response = await axiosInstance.put(`/user/order/cancelOrder?orderId=${orderId}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error cancelling order:', error);\n    throw new Error(error?.response?.data?.message || 'Error cancelling order.');\n  }\n};\n"],"names":[],"mappings":";;;;;;;AAAA;;AAEO,MAAM,cAAc,OAAO,QAAQ;IACxC,IAAI;QACF,MAAM,WAAW,MAAM,0HAAA,CAAA,gBAAa,CAAC,IAAI,CAAC,2BAA2B;YAAE;YAAQ;QAAM;QACrF,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AAEO,MAAM,8BAA8B,OAAO,SAAQ,YAAY,WAAW;IAC7E,QAAQ,GAAG,CAAC,aAAY;IACxB,QAAQ,GAAG,CAAC,eAAc;IAC1B,QAAQ,GAAG,CAAC,cAAa;IACzB,QAAQ,GAAG,CAAC,UAAS;IACvB,IAAI;QACF,MAAM,WAAW,MAAM,0HAAA,CAAA,gBAAa,CAAC,IAAI,CAAC,sBAAsB,CAAC,GAEjE;YACI,QAAO;gBACH;gBACA;gBACA;gBACA;YACJ;QACJ;QAGA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AAEO,MAAM,gBAAgB,OAAO;IAChC,QAAQ,GAAG,CAAC,YAAW;IACzB,IAAI;QACF,MAAM,WAAW,MAAM,0HAAA,CAAA,gBAAa,CAAC,IAAI,CAAC,CAAC,kCAAkC,EAAE,SAAS;QACxF,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AACO,MAAM,mBAAmB,OAAO;IACnC,QAAQ,GAAG,CAAC,WAAW;IACvB,IAAI;QACF,MAAM,WAAW,MAAM,0HAAA,CAAA,gBAAa,CAAC,GAAG,CAAC,CAAC,gCAAgC,EAAE,QAAQ;QAGpF,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AACK,MAAM,cAAc,OAAO;IAC9B,QAAQ,GAAG,CAAC;IACd,IAAI;QACF,MAAM,WAAW,MAAM,0HAAA,CAAA,gBAAa,CAAC,GAAG,CAAC,CAAC,gCAAgC,EAAE,SAAS;QACrF,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/_routeprotector/WithAuth.js"],"sourcesContent":["import { useRouter } from 'next/navigation';\nimport { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nconst withAuth = (WrappedComponent) => {\n  return (props) => {\n    const router = useRouter();\n    const isLoggedIn = useSelector((state) => state.session.user);\n    const [loading, setLoading] = useState(true);  // Add a loading state\n\n    useEffect(() => {\n      if (isLoggedIn !== undefined) {\n        setLoading(false); \n      }\n    }, [isLoggedIn]);\n\n    useEffect(() => {\n      if (!loading && !isLoggedIn) {\n        router.push('/auth'); \n      }\n    }, [loading, isLoggedIn, router]);\n\n    if (loading) {\n      return <div>Loading.......</div>; \n    }\n\n    return isLoggedIn ? <WrappedComponent {...props} /> : null;\n  };\n};\n\nexport default withAuth;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAEA,MAAM,WAAW,CAAC;IAChB,OAAO,CAAC;QACN,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;QACvB,MAAM,aAAa,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD,EAAE,CAAC,QAAU,MAAM,OAAO,CAAC,IAAI;QAC5D,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,OAAQ,sBAAsB;QAErE,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;YACR,IAAI,eAAe,WAAW;gBAC5B,WAAW;YACb;QACF,GAAG;YAAC;SAAW;QAEf,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;YACR,IAAI,CAAC,WAAW,CAAC,YAAY;gBAC3B,OAAO,IAAI,CAAC;YACd;QACF,GAAG;YAAC;YAAS;YAAY;SAAO;QAEhC,IAAI,SAAS;YACX,qBAAO,8OAAC;0BAAI;;;;;;QACd;QAEA,OAAO,2BAAa,8OAAC;YAAkB,GAAG,KAAK;;;;;mBAAO;IACxD;AACF;uCAEe"}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/orders/page.js"],"sourcesContent":["\"use client\";\nimport React, { useState, useEffect } from 'react';\nimport { getOrderByUserId, cancelOrder } from '../service/OrderService';\nimport { useSelector } from 'react-redux';\nimport withAuth from '../_routeprotector/WithAuth';\nconst OrderTile = ({ order, onCancel }) => {\n  const handleCancel = () => {\n    onCancel(order.id);\n  };\n console.log(order);\n  return (\n    <section className=\"bg-white py-5 text-gray-700 sm:py-5 lg:py-5  overflow-y-hidden\">\n      <div className=\"mx-auto max-w-screen-xl px-4 sm:px-6 lg:px-4\">\n        <div className=\"mx-auto max-w-md text-center mb-4\">\n          <h2 className=\"font-serif text-2xl font-bold sm:text-3xl\">\n            Order ID <span className=\"text-gray-500\"># {order.id}</span>\n          </h2>\n        </div>\n\n        <div className=\"mt-10 grid grid-cols-1 gap-6 lg:grid-cols-1 lg:gap-4\">\n          <article className=\"relative p-4 border rounded-lg shadow-md bg-white\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-bold\">Order Status</h3>\n              <div className=\"flex items-center space-x-2\">\n                <p className={`text-sm ${order.orderStatus === 'OnDeliver' ? 'text-green-500' : 'text-red-500'}`}>\n                  {order.orderStatus}\n                </p>\n             \n              </div>\n              \n            </div>\n           \n            <div className=\"flex justify-between items-center mb-2\">\n            {order.orderStatus !== 'CANCELLED' && (\n                  <button\n                    className=\"px-4 py-1 bg-red-500 text-white rounded hover:bg-red-700 transition-colors duration-200\"\n                    onClick={handleCancel}\n                  >\n                    Cancel\n                  </button>\n                )}\n              {/* <p className=\"text-sm text-gray-500\">Estimated arrival: {order.estimatedArrival}</p> */}\n            </div>\n            <div className=\"flex items-center space-x-4 mt-4 overflow-x-auto scroll-smooth\">\n              {order.items.map((item) => (\n                <div key={item.id} className=\"flex flex-col items-center min-w-[200px]\">\n                  <div className=\"aspect-square w-full overflow-hidden\">\n                    <img\n                      src={item.product.imageUrl || \"/_assets/image.png\"}\n                      alt={item.product.name}\n                      className=\"group-hover:scale-110 h-full w-full object-cover transition-all duration-300 rounded-md\"\n                    />\n                  </div>\n                  <p className=\"text-sm font-semibold text-center mt-2\">{item.product.name}</p>\n                  <p className=\"text-sm text-center\">\n                    Rp {item.price.toLocaleString()} x {item.quantity}\n                  </p>\n                </div>\n              ))}\n            </div>\n\n            <p className=\"mt-4 font-bold text-lg\">Total: Rp {order.totalAmount.toLocaleString()}</p>\n            {order.orderStatus === 'Cancelled' && (\n              <p className=\"mt-2 text-red-500 font-semibold\">Order Cancelled</p>\n            )}\n          </article>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nconst OrderPage = () => {\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const userId = useSelector((state) => state.session.user?.id);\n\n  useEffect(() => {\n    const fetchOrders = async () => {\n      if (!userId) return; \n      try {\n        setLoading(true);\n        const data = await getOrderByUserId(userId);\n        setOrders(data.orders || []); \n      } catch (err) {\n        setError(err?.message || \"An error occurred\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchOrders();\n  }, [userId]);\n\n  const handleCancelOrder = async (orderId) => {\n    try {\n    //   setLoading(true);\n      await cancelOrder(orderId);\n      setOrders((prevOrders) =>\n        prevOrders.map((order) =>\n          order.id === orderId ? { ...order, orderStatus: 'Cancelled' } : order\n        )\n      );\n    } catch (err) {\n      setError(err?.message || \"Failed to cancel order\");\n    } finally {\n    //   setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return <div className=\"text-center text-lg\">Loading...</div>;\n  }\n\n  if (error) {\n    return <div className=\"text-red-500 text-center text-lg\">Error: {error}</div>;\n  }\n\n  return (\n    <>\n    <h1 className=\"text-3xl font-bold mb-6 text-center\">My Orders</h1>\n\n    <div className=\"container mx-auto p-4 max-h-lvh overflow-y-scroll my-10\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4\">\n        {orders.map((order) => (\n          <OrderTile key={order.id} order={order} onCancel={handleCancelOrder} />\n        ))}\n      </div>\n    </div>\n    </>\n  );\n};\n\nexport default withAuth(OrderPage);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 436, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}