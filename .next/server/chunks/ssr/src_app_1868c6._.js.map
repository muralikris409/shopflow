{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 12, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/service/UserCartService.js"],"sourcesContent":["\"use client\";\n\nimport { useSelector } from \"react-redux\";\nimport { axiosInstance } from \"../api/axios\";\n\nfunction UserCartService() {\n  const token = useSelector((state) => state.session.token);\n\n  const cartKey = 'shopflow';\n\n  const getHeaders = () => ({\n    Authorization: `Bearer ${token}`,\n    'Content-Type': 'application/json',\n  });\n\n  this.loadCart = function() {\n    const storedCart = localStorage.getItem(cartKey);\n    return storedCart ? JSON.parse(storedCart) : [];\n  };\n\n  this.saveCart = function(cart) {\n    localStorage.setItem(cartKey, JSON.stringify(cart));\n  };\n\n  this.migrateCart = async function(userId) {\n    const guestCart = this.loadCart();\n\n    if (guestCart.length > 0) {\n      for (const item of guestCart) {\n        try {\n          await this.addItemToCart(userId, item.productId, item.quantity);\n        } catch (error) {\n          console.error('Error migrating cart item:', error);\n        }\n      }\n      this.clearCart();\n    }\n  };\n\n  this.addItemToCart = async function(userId, productId, quantity = 1) {\n    console.log(userId);\n    console.log(productId);\n    try {\n      const response = await axiosInstance.post(\n        // `/user/cart/addItemToCart?userId=${userId}&productId==${userId}4&quantity=${quantity}`, \n        `/user/cart/addItemToCart`,\n       {},\n        {\n          params:{\n            \n              userId,\n              productId,\n              quantity\n             \n          },\n          headers: getHeaders()\n        }\n      );\n      \n\n        return response.data;\n    \n    \n    } catch (error) {\n      console.error('Error adding item to cart:', error);\n      throw error.response ? error.response.data : new Error('Network or server error');\n    }\n  };\n\n  this.viewCart = async function(userId) {\n    try {\n      const response = await axiosInstance.get('/user/cart/viewCart', {\n        params: { userId },\n        headers: getHeaders(),\n      });\n\n      if (response.status === 200) {\n        return response.data.data || [];\n      } else {\n        throw new Error(response.data.message || 'Failed to retrieve cart');\n      }\n    } catch (error) {\n      console.error('Error viewing cart:', error);\n      throw error.response ? error.response.data : new Error('Network or server error');\n    }\n  };\n\n  this.deleteFromCart = async function(userId, productId) {\n    try {\n      const response = await axiosInstance.delete('/user/cart/deleteFromCart', {\n        params: { userId, productId },\n        headers: getHeaders(),\n      });\n\n      if (response.status === 200) {\n        return response.data;\n      } else {\n        throw new Error(response.data.message || 'Failed to delete item from cart');\n      }\n    } catch (error) {\n      console.error('Error deleting item from cart:', error);\n      throw error.response ? error.response.data : new Error('Network or server error');\n    }\n  };\n\n  this.updateCartCount = async function(userId, productId, operation) {\n    try {\n      const response = await axiosInstance.put('/user/cart/cartCount', {}, {\n        params: { userId, productId, operation },\n        headers: getHeaders(),\n      });\n      console.log(response.status)\n      if (response.status === 200) {\n        return response.data;\n      } else {\n        throw new Error(response.data || 'Failed to update cart count');\n      }\n    } catch (error) {\n      console.error('Error updating cart count:', error);\n      throw error;\n    }\n  };\n\n  this.clearCart = function() {\n    localStorage.removeItem(cartKey);\n  };\n}\n\nexport default UserCartService;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/_routeprotector/WithAuth.js"],"sourcesContent":["import { useRouter } from 'next/navigation';\nimport { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nconst withAuth = (WrappedComponent) => {\n  return (props) => {\n    const router = useRouter();\n    const isLoggedIn = useSelector((state) => state.session.user);\n    const [loading, setLoading] = useState(true);  // Add a loading state\n\n    useEffect(() => {\n      if (isLoggedIn !== undefined) {\n        setLoading(false); \n      }\n    }, [isLoggedIn]);\n\n    useEffect(() => {\n      if (!loading && !isLoggedIn) {\n        router.push('/auth'); \n      }\n    }, [loading, isLoggedIn, router]);\n\n    if (loading) {\n      return <div>Loading.......</div>; \n    }\n\n    return isLoggedIn ? <WrappedComponent {...props} /> : null;\n  };\n};\n\nexport default withAuth;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAEA,MAAM,WAAW,CAAC;IAChB,OAAO,CAAC;QACN,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;QACvB,MAAM,aAAa,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD,EAAE,CAAC,QAAU,MAAM,OAAO,CAAC,IAAI;QAC5D,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,OAAQ,sBAAsB;QAErE,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;YACR,IAAI,eAAe,WAAW;gBAC5B,WAAW;YACb;QACF,GAAG;YAAC;SAAW;QAEf,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;YACR,IAAI,CAAC,WAAW,CAAC,YAAY;gBAC3B,OAAO,IAAI,CAAC;YACd;QACF,GAAG;YAAC;YAAS;YAAY;SAAO;QAEhC,IAAI,SAAS;YACX,qBAAO,8OAAC;0BAAI;;;;;;QACd;QAEA,OAAO,2BAAa,8OAAC;YAAkB,GAAG,KAAK;;;;;mBAAO;IACxD;AACF;uCAEe"}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow/src/app/checkout/page.js"],"sourcesContent":["\"use client\"\nimport React, { useEffect, useState } from 'react';\nimport OrderSummary from './Checkout';  \nimport UserCartService from '../service/UserCartService';\nimport { useSelector } from 'react-redux';\nimport { useSearchParams } from 'next/navigation';\nimport withAuth from '../_routeprotector/WithAuth';\n\nconst fieldData = {\n  title: \"Order Summary\",\n  steps: [\n    { number: 1, label: \"Cart\", active: true, href: \"#\", icon: null, iconPath: \"\" },\n    { number: 2, label: \"Shipping\", active: false, href: \"#\", icon: null, iconPath: \"\" },\n    { number: 3, label: \"Payment\", active: false, href: \"#\", icon: null, iconPath: \"\" }\n  ],\n  shippingMethods: [\n    {\n      name: \"Standard Shipping\",\n      description: \"5-7 business days\",\n      image: \"https://via.placeholder.com/50\",\n      defaultChecked: true\n    },\n    {\n      name: \"Express Shipping\",\n      description: \"2-3 business days\",\n      image: \"https://via.placeholder.com/50\",\n      defaultChecked: false\n    }\n  ],\n  billingAddress: {\n    placeholder: \"Enter your address\",\n    flag: \"https://via.placeholder.com/20\",\n    states: [\"California\", \"Texas\", \"New York\"],\n    countries: [\"USA\", \"Canada\", \"UK\"]\n  }\n};\n\nfunction Page() {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const userCartService = new UserCartService();\n  const userId = useSelector((state) => state.session.user?.id);\n  const searchParams = useSearchParams();\n  const orders = JSON.parse(searchParams.get('data'))||[];\n\n  const fetchProducts = async () => {\n    if (!userId) return;  \n    try {\n      const response = await userCartService.viewCart(userId);\n      console.log(response)\n      const productData = response; \n      setProducts(productData);\n      \n    } catch (error) {\n      console.error(\"Error fetching products:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (userId) {\n      fetchProducts();\n    }\n  }, [userId]);\n\n  if (loading) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <OrderSummary \n      title={fieldData.title} \n      steps={fieldData.steps} \n      data={products.items} \n      userId={userId}\n      orders={orders}\n      totalBill={products.totalAmount}\n      shippingMethods={fieldData.shippingMethods} \n      billingAddress={fieldData.billingAddress}\n    />\n  );\n}\nexport default withAuth(Page);"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAEA;AACA;AAFA;AAJA;;;;;;;;AAQA,MAAM,YAAY;IAChB,OAAO;IACP,OAAO;QACL;YAAE,QAAQ;YAAG,OAAO;YAAQ,QAAQ;YAAM,MAAM;YAAK,MAAM;YAAM,UAAU;QAAG;QAC9E;YAAE,QAAQ;YAAG,OAAO;YAAY,QAAQ;YAAO,MAAM;YAAK,MAAM;YAAM,UAAU;QAAG;QACnF;YAAE,QAAQ;YAAG,OAAO;YAAW,QAAQ;YAAO,MAAM;YAAK,MAAM;YAAM,UAAU;QAAG;KACnF;IACD,iBAAiB;QACf;YACE,MAAM;YACN,aAAa;YACb,OAAO;YACP,gBAAgB;QAClB;QACA;YACE,MAAM;YACN,aAAa;YACb,OAAO;YACP,gBAAgB;QAClB;KACD;IACD,gBAAgB;QACd,aAAa;QACb,MAAM;QACN,QAAQ;YAAC;YAAc;YAAS;SAAW;QAC3C,WAAW;YAAC;YAAO;YAAU;SAAK;IACpC;AACF;AAEA,SAAS;IACP,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,kBAAkB,IAAI,wIAAA,CAAA,UAAe;IAC3C,MAAM,SAAS,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD,EAAE,CAAC,QAAU,MAAM,OAAO,CAAC,IAAI,EAAE;IAC1D,MAAM,eAAe,CAAA,GAAA,kIAAA,CAAA,kBAAe,AAAD;IACnC,MAAM,SAAS,KAAK,KAAK,CAAC,aAAa,GAAG,CAAC,YAAU,EAAE;IAEvD,MAAM,gBAAgB;QACpB,IAAI,CAAC,QAAQ;QACb,IAAI;YACF,MAAM,WAAW,MAAM,gBAAgB,QAAQ,CAAC;YAChD,QAAQ,GAAG,CAAC;YACZ,MAAM,cAAc;YACpB,YAAY;QAEd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;QAC5C,SAAU;YACR,WAAW;QACb;IACF;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,QAAQ;YACV;QACF;IACF,GAAG;QAAC;KAAO;IAEX,IAAI,SAAS;QACX,qBAAO,8OAAC;sBAAI;;;;;;IACd;IAEA,qBACE,8OAAC,kIAAA,CAAA,UAAY;QACX,OAAO,UAAU,KAAK;QACtB,OAAO,UAAU,KAAK;QACtB,MAAM,SAAS,KAAK;QACpB,QAAQ;QACR,QAAQ;QACR,WAAW,SAAS,WAAW;QAC/B,iBAAiB,UAAU,eAAe;QAC1C,gBAAgB,UAAU,cAAc;;;;;;AAG9C;uCACe,CAAA,GAAA,yIAAA,CAAA,UAAQ,AAAD,EAAE"}},
    {"offset": {"line": 319, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}