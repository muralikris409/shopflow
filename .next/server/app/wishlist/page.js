(()=>{var e={};e.id=720,e.ids=[720],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},83997:e=>{"use strict";e.exports=require("tty")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},10101:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=t(70260),i=t(28203),a=t(25155),o=t.n(a),n=t(67292),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(s,l);let c=["",{children:["wishlist",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,98919)),"/home/murali/Documents/Cloning task/shopflow/src/app/wishlist/page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,78162))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,37043)),"/home/murali/Documents/Cloning task/shopflow/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(t.bind(t,26420)),"/home/murali/Documents/Cloning task/shopflow/src/app/not-found.js"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,78162))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/murali/Documents/Cloning task/shopflow/src/app/wishlist/page.js"],u={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/wishlist/page",pathname:"/wishlist",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},64078:(e,s,t)=>{Promise.resolve().then(t.bind(t,98919))},3830:(e,s,t)=>{Promise.resolve().then(t.bind(t,80563))},31857:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});var r=t(45512),i=t(79334),a=t(58009),o=t(92273);let n=e=>s=>{let t=(0,i.useRouter)(),n=(0,o.d4)(e=>e.session.user),[l,c]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{void 0!==n&&c(!1)},[n]),(0,a.useEffect)(()=>{l||n||t.push("/auth")},[l,n,t]),l)?(0,r.jsx)("div",{children:"Loading......."}):n?(0,r.jsx)(e,{...s}):null}},97310:(e,s,t)=>{"use strict";t.d(s,{UI:()=>i,lx:()=>a});var r=t(85209);async function i(e,s){try{return(await r.S.get("/user/wishlist/viewWishlist",{params:{userId:e},headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data.data.products||[]}catch(e){return console.error("Error loading wishlist:",e),[]}}async function a(e,s,t){try{return await r.S.post("/user/wishlist/addOrRemoveItem",{},{params:{userId:e,productId:s},headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})}catch(e){throw console.error("Error adding or removing product to wishlist:",e),e}}},80563:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(45512),i=t(58009),a=t(97310),o=t(92273);let n=(0,t(31857).A)(()=>{let[e,s]=(0,i.useState)([]),[t,n]=(0,i.useState)(null),c=(0,o.d4)(e=>e.session.user?.id),d=(0,o.d4)(e=>e.session.token);(0,i.useEffect)(()=>{(async()=>{try{if(c){let e=await (0,a.UI)(c,d);console.log("wishlist:",e),s(e)}}catch(e){n("Failed to load wishlist. Please try again later.")}})()},[c,d]);let u=async t=>{console.log(e);try{c&&(s(e=>e.filter(e=>e.productId!==t)),await (0,a.lx)(c,t,d))}catch(e){n("Failed to remove product from wishlist. Please try again later."),console.log(e)}};return(0,r.jsx)("section",{className:"h-1/3 bg-gray-100 py-12 sm:py-16 lg:py-20",children:(0,r.jsxs)("div",{className:"mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:e.length>0?(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Your Wishlist"}):(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Your Wishlist is empty"})}),t&&(0,r.jsx)("div",{className:"text-center text-red-500 mt-4",children:t}),(0,r.jsx)("div",{className:"mx-auto mt-8 max-w-2xl md:mt-12",children:(0,r.jsx)("div",{className:"bg-white shadow",children:(0,r.jsx)("div",{className:"px-4 py-6 sm:px-8 sm:py-10",children:(0,r.jsx)("div",{className:"flow-root",children:(0,r.jsx)("ul",{className:"-my-8",children:e.map((e,s)=>(0,r.jsx)(l,{product:e.product,onRemoveProduct:u},s))})})})})})]})})});function l({product:e,onRemoveProduct:s}){return(0,r.jsxs)("li",{className:"flex flex-col space-y-3 py-6 text-left sm:flex-row sm:space-x-5 sm:space-y-0",children:[(0,r.jsx)("div",{className:"shrink-0",children:(0,r.jsx)("img",{className:"h-24 w-24 max-w-full rounded-lg object-cover",src:e.image||"/_assets/image.png",alt:e.name})}),(0,r.jsxs)("div",{className:"relative flex flex-1 flex-col justify-between",children:[(0,r.jsx)("div",{className:"sm:col-gap-5 sm:grid sm:grid-cols-2",children:(0,r.jsxs)("div",{className:"pr-8 sm:pr-5",children:[(0,r.jsx)("p",{className:"text-base font-semibold text-gray-900",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Brand: ",e.brand]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-500 line-through",children:["$",e.actualPrice]}),(0,r.jsxs)("p",{className:"text-sm text-orange-500",children:["$",e.offerPrice]}),(0,r.jsxs)("p",{className:"text-sm text-green-500",children:["(",e.discountPercentage,"% off)"]})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Rating: ",e.rating," / 5"]})]})}),(0,r.jsx)("div",{className:"absolute top-0 right-0 flex sm:bottom-0 sm:top-auto",children:(0,r.jsx)("button",{onClick:()=>s(e.id),type:"button",className:"flex rounded p-2 text-center text-gray-500 transition-all duration-200 ease-in-out focus:shadow hover:text-gray-900",children:(0,r.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})})]})]})}},98919:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/murali/Documents/Cloning task/shopflow/src/app/wishlist/page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/murali/Documents/Cloning task/shopflow/src/app/wishlist/page.js","default")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[638,803,140],()=>t(10101));module.exports=r})();